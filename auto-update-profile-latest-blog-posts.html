<!DOCTYPE html><html lang="en"><head><link href="https://unpkg.com/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet"><style type="text/css">.splide{border:2px solid var(--carousel-border-color);box-shadow:0 4px 8px var(--carousel-shadow-color);border-radius:var(--carousel-border-radius)}.splide__slide img{width:100%;height:100%;object-fit:contain}.carousel-container{visibility:inherit;margin-top:20px;margin-bottom:20px}.carousel-caption{min-height:2em;line-height:2em;text-align:center;font-size:.9em;font-style:italic;padding:6px;margin-left:auto;margin-right:auto}.splide__arrow{background:0 0;align-items:center;border:0;cursor:pointer;display:flex;height:5em;justify-content:center;position:absolute;top:50%;transform:translateY(-50%);width:5em;z-index:10}.splide__arrow:disabled{opacity:0}.splide__arrow--prev{left:0}.splide__arrow--next{right:0}.splide__arrow svg{fill:var(--carousel-arrow-color);height:2.5em;transition:fill .2s linear;width:2.5em}.splide__arrow:hover:not(:disabled) svg{fill:var(--carousel-arrow-hover-color)}.splide__arrow:focus-visible{outline:transparent;outline-offset:0}.splide.is-focus-in .splide__arrow:focus{outline:transparent;outline-offset:0}.splide__pagination__page:focus-visible{outline:transparent;outline-offset:0}.splide.is-focus-in .splide__pagination__page:focus{outline:transparent;outline-offset:0}.splide__pagination{bottom:1em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:var(--carousel-pagination-color);border:0;border-radius:2.5px;display:inline-block;height:5px;margin:3px;width:20px;transition:background-color .2s linear}.splide__pagination__page.is-active{background:var(--carousel-pagination-active-color)}.splide__pagination__page:hover{background:var(--carousel-pagination-hover-color);cursor:pointer;opacity:.9}.splide__pagination__page::before{content:'';position:absolute;top:-18px;bottom:-18px;left:-4px;right:-4px}.splide__pagination__page.is-active::before{content:'';position:absolute;top:-12px;bottom:-12px;left:-1px;right:-1px}.zoomable{object-fit:contain}.zooming{max-width:90vw!important;max-height:90vh!important;object-fit:contain!important}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><link rel="manifest" href="/en/images/site.webmanifest"><meta name="msvalidate.01" content="BE3DB9F22A0915AF3452024048D66934"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300italic,400,400italic,700,700italic%7CNoto+Serif:300,300italic,400,400italic,700,700italic%7CFira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-flash.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"siriusq.top","root":"/en/","images":"/en/images","scheme":"Gemini","darkmode":"auto","version":"8.20.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":320,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><meta name="description" content="I&#39;ve added a section on my GitHub custom profile page to display the most recent blog updates. However, it&#39;s quite inconvenient to update it manually every time I publish a new blog post. So, followin"><meta property="og:type" content="article"><meta property="og:title" content="Automatically Update the Recent Blog Posts Section in the Custom Profile README When a GitHub Pages-Based Blog Is Updated."><meta property="og:url" content="https://siriusq.top/en/auto-update-profile-latest-blog-posts.html"><meta property="og:site_name" content="Sirius"><meta property="og:description" content="I&#39;ve added a section on my GitHub custom profile page to display the most recent blog updates. However, it&#39;s quite inconvenient to update it manually every time I publish a new blog post. So, followin"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://s2.loli.net/2023/10/19/efvxrmFJIGRqPCT.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/MCX8r6medVjocbq.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/nGbz1mhuYMXlEIV.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/HyqLWKu5wg8B3hJ.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/8oPj7UqBV4Ynscv.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/y4T2RbD7UEWQY6Z.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/ZfOqEgM3Yh97oTW.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/Yb8BGd2ePlEMWRn.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/qzHiYgNlOWtyVLw.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/PItMG7ikaYb3CqF.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/jUoBOJmAY9utS8h.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/oMWf2XS6GavL8jt.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/4WpxQZuj6IOmcDo.webp"><meta property="og:image" content="https://s2.loli.net/2023/10/19/qs9INfATvKBamn2.webp"><meta property="article:published_time" content="2023-10-17T09:10:55.000Z"><meta property="article:modified_time" content="2024-09-13T16:15:16.000Z"><meta property="article:author" content="Sirius"><meta property="article:tag" content="Hexo"><meta property="article:tag" content="GitHub Pages"><meta property="article:tag" content="GitHub Actions"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2023/10/19/efvxrmFJIGRqPCT.webp"><link rel="canonical" href="https://siriusq.top/en/auto-update-profile-latest-blog-posts.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://siriusq.top/en/auto-update-profile-latest-blog-posts.html","path":"auto-update-profile-latest-blog-posts.html","title":"Automatically Update the Recent Blog Posts Section in the Custom Profile README When a GitHub Pages-Based Blog Is Updated."}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Automatically Update the Recent Blog Posts Section in the Custom Profile README When a GitHub Pages-Based Blog Is Updated. | Sirius</title><script src="/en/live2d-widget/autoload.js"></script><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Sirius" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Sirius</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">May the Force be with you</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/en/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/en/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">111</span></a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">76</span></a></li><li class="menu-item menu-item-tools"><a href="/en/tools/" rel="section"><i class="fa fa-screwdriver-wrench fa-fw"></i>Tools</a></li><li class="menu-item menu-item-switch-to-chinese"><a href="https://siriusq.top/" rel="section"><i class="fa fa-language fa-fw"></i>Switch to Chinese</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Principle"><span class="nav-number">1.</span> <span class="nav-text">Principle</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Enable-RSS-Function"><span class="nav-number">2.</span> <span class="nav-text">Enable RSS Function</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Elevate-Permissions"><span class="nav-number">3.</span> <span class="nav-text">Elevate Permissions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Obtain-a-GitHub-Token"><span class="nav-number">3.1.</span> <span class="nav-text">Obtain a GitHub Token</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set-Up-Secrets"><span class="nav-number">3.2.</span> <span class="nav-text">Set Up Secrets</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Workflows-Configuration"><span class="nav-number">4.</span> <span class="nav-text">Workflows Configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Profile-Repository"><span class="nav-number">4.1.</span> <span class="nav-text">Profile Repository</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-a-Workflow"><span class="nav-number">4.1.1.</span> <span class="nav-text">Create a Workflow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set-Workflow-R-W-Permissions"><span class="nav-number">4.1.2.</span> <span class="nav-text">Set Workflow R&#x2F;W Permissions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-a-Node-Script"><span class="nav-number">4.1.3.</span> <span class="nav-text">Create a Node Script</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Adding-Identifiers-to-README"><span class="nav-number">4.1.4.</span> <span class="nav-text">Adding Identifiers to README</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Blog-Repository"><span class="nav-number">4.2.</span> <span class="nav-text">Blog Repository</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Create-a-Workflow-1"><span class="nav-number">4.2.1.</span> <span class="nav-text">Create a Workflow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Modify-Hexo-Configuration"><span class="nav-number">4.2.2.</span> <span class="nav-text">Modify Hexo Configuration</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Sirius" src="https://s2.loli.net/2022/05/23/kxtRKT4u71HXlUY.gif"><p class="site-author-name" itemprop="name">Sirius</p><div class="site-description" itemprop="description">Thread_sleep(1); //be nice to the CPU</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/en/archives/"><span class="site-state-item-count">76</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/en/categories/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/en/tags/"><span class="site-state-item-count">111</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Siriusq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Siriusq" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="/en/atom.xml" title="RSS Feed → &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i>RSS Feed</a> </span><span class="links-of-author-item"><a href="mailto:siriusq.top@outlook.com" title="E-Mail → mailto:siriusq.top@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://leetcode.com/Siriusq/" title="LeetCode → https:&#x2F;&#x2F;leetcode.com&#x2F;Siriusq&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-code fa-fw"></i>LeetCode</a></span></div><script src="/en/js/switch_limited.js"></script></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://siriusq.top/en/auto-update-profile-latest-blog-posts.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://s2.loli.net/2022/05/23/kxtRKT4u71HXlUY.gif"><meta itemprop="name" content="Sirius"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sirius"><meta itemprop="description" content="Thread_sleep(1); //be nice to the CPU"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Automatically Update the Recent Blog Posts Section in the Custom Profile README When a GitHub Pages-Based Blog Is Updated. | Sirius"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Automatically Update the Recent Blog Posts Section in the Custom Profile README When a GitHub Pages-Based Blog Is Updated.</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2023-10-17 17:10:55" itemprop="dateCreated datePublished" datetime="2023-10-17T17:10:55+08:00">2023-10-17</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-09-14 00:15:16" itemprop="dateModified" datetime="2024-09-14T00:15:16+08:00">2024-09-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Website-Configuration/" itemprop="url" rel="index"><span itemprop="name">Website Configuration</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="Word count in article"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">Word count in article: </span><span>4k</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">Reading time &asymp;</span> <span>15 mins.</span></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote class="blockquote-center">I've added a section on my GitHub custom profile page to display the most recent blog updates. However, it's quite inconvenient to update it manually every time I publish a new blog post. So, following the principle of "laziness is the mother of invention," I've come up with a method to automatically update the recent blog posts section on my profile page after deploying my blog using GitHub Actions.</blockquote><span id="more"></span><div class="note warning"><p>Note: The blogging framework used in this article is Hexo, and the theme is Next. The RSS Feed is in Atom 1.0 format.</p></div><h1 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h1><p><img data-src="https://s2.loli.net/2023/10/19/efvxrmFJIGRqPCT.webp" alt="auto_update_profile.webp"></p><p>The basic principle of this method is as shown in the diagram above. First, we need to set up a Workflow in both the blog repository and the Profile repository. When we execute the <code>hexo deploy</code> operation to push the blog files to the GitHub repository, GitHub Pages will automatically run a Workflow to deploy the blog website. After the deployment is completed, our configured “Trigger Profile Update” Workflow will be triggered. Its purpose is to invoke another Workflow in the Profile repository called “Update Latest Blog Posts.” The Workflow in the Profile repository runs the <code>update-readme.mjs</code> script. This script first accesses the blog’s RSS Feed, reads its content, and uses regular expressions to extract the titles and links of the blog posts. It then reads the <code>README.md</code> file, locates the identifier we’ve set in advance, replaces the existing content within the identifier with the extracted content, and writes the modifications back to the <code>README.md</code> file. Finally, the Workflow pushes the changes back to the repository.</p><h1 id="Enable-RSS-Function"><a href="#Enable-RSS-Function" class="headerlink" title="Enable RSS Function"></a>Enable RSS Function</h1><p>First, we need to enable the RSS functionality of the blog to allow the script to fetch blog titles and URLs. Enabling the RSS functionality in the Hexo framework requires the installation of the <code>hexo-generator-feed</code> plugin, which supports generating feeds in both Atom 1.0 and RSS 2.0 formats.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><details class="note primary"><summary><p>About Atom 1.0 and RSS 2.0</p></summary><p>Atom 1.0 and RSS 2.0 are standardized formats used for publishing blogs, news, and other web content. They have some differences, primarily in the following aspects:</p><p><strong>1. Data Format:</strong></p><ul><li>Atom 1.0 uses a structured XML data format, which is more uniform and consistent, making it more machine-readable.</li><li>RSS 2.0 also uses XML but has a relatively less uniform structure, which may require more processing during parsing.</li></ul><p><strong>2. Title and Author:</strong></p><ul><li>Atom 1.0 has stricter requirements for metadata like titles and authors, where titles and authors are mandatory fields.</li><li>RSS 2.0 has relatively looser requirements for metadata like titles and authors, and these fields are optional.</li></ul><p><strong>3. Extensibility:</strong></p><ul><li>Atom 1.0 provides more powerful extensibility, allowing the addition of custom metadata and namespaces to meet the needs of various applications.</li><li>RSS 2.0 also supports extensions, but it’s relatively more limited in extensibility compared to Atom.</li></ul><p><strong>4. Publication Date:</strong></p><ul><li>Atom 1.0 uses the “published” element to represent the publication date of a blog post in a standardized date format.</li><li>RSS 2.0 uses the “pubDate” element to represent the publication date, which is relatively more flexible and might require more parsing.</li></ul><p><strong>5. Item Links:</strong></p><ul><li>Atom 1.0 uses the “link” element to represent a fixed link to a blog post.</li><li>RSS 2.0 also uses the “link” element, but it might sometimes represent different types of links, such as a fixed link or a comment link.</li></ul><p>In summary, Atom 1.0 is more standardized and consistent, suitable for applications that require highly structured data. RSS 2.0 is more flexible in some aspects, making it suitable for simpler use cases. The choice between the two standards typically depends on your specific requirements and the data structure and format you prefer.</p><blockquote><p>Sourced from ChatGPT</p></blockquote></details><p>After the installation, open the Hexo framework’s configuration file <code>_config.yml</code> and add the following configuration:</p><figure class="highlight yml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Rss Feed</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">icon.png</span></span><br><span class="line">  <span class="attr">autodiscovery:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">template:</span></span><br></pre></td></tr></table></figure><p>The next steps are for adding an RSS subscribe button to the blog website. You can skip this part if it’s not needed.</p><p>Open the configuration file for the Next theme, <code>_config.next.yml</code>, and use the search feature to quickly locate the <code># Social Links</code> configuration. Under <code>social:</code>, add the following line: <code>RSS Feed: /atom.xml || fa fa-rss</code>. Here’s an example:</p><figure class="highlight yml"><figcaption><span>_config.next.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Social Links</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon`</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/Siriusq</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">RSS Feed:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br></pre></td></tr></table></figure><p>This will display an RSS subscribe button in the sidebar.</p><div class="note warning"><p>Note: When blog titles contain Chinese characters, viewing <code>atom.xml</code> directly in the browser might display garbled text. However, if you right-click and save it to your local machine and then open it with VSCode, it should display correctly. You don’t need to worry about this issue.</p></div><h1 id="Elevate-Permissions"><a href="#Elevate-Permissions" class="headerlink" title="Elevate Permissions"></a>Elevate Permissions</h1><h2 id="Obtain-a-GitHub-Token"><a href="#Obtain-a-GitHub-Token" class="headerlink" title="Obtain a GitHub Token"></a>Obtain a GitHub Token</h2><p>In our workflow, we need to make cross-repository calls to GitHub Actions, and the default permissions of GitHub Actions may not be sufficient for these operations. To address this, we need to obtain a Personal Access Token and use it to grant additional access permissions to GitHub Actions.</p><details class="note primary"><summary><p>About Personal Access Tokens</p></summary><p>A GitHub Personal Access Token is a token used for authentication and accessing GitHub’s API. It serves several purposes:</p><ol><li><p><strong>Authentication</strong>: Personal Access Tokens allow you to access GitHub resources in the context of your GitHub account without revealing your password. This provides a more secure way of authentication without exposing your GitHub account password.</p></li><li><p><strong>Access Permissions</strong>: You can configure different permissions for each Personal Access Token, ranging from read-only access to full repository access. This allows you to create tokens with limited, specific capabilities for different use cases and applications.</p></li><li><p><strong>API Access</strong>: You can use Personal Access Tokens to perform various operations through the GitHub API, such as retrieving repository information, creating issues, pushing code, and more. This is useful for automating tasks and integrating GitHub into applications or workflows.</p></li><li><p><strong>Bypassing Limitations</strong>: In some situations, GitHub imposes API limits, such as rate limits. Using a Personal Access Token allows you to bypass these limitations within the context of your account.</p></li><li><p><strong>Application Integration</strong>: Personal Access Tokens can also be used to integrate GitHub into third-party applications, enabling those applications to perform specific GitHub operations.</p></li></ol><p>Personal Access Tokens are powerful tools but should be managed with care to ensure security. Avoid sharing or leaking your tokens, grant only the necessary permissions, and regularly review and revoke tokens that are no longer needed to reduce potential risks.</p><blockquote><p>Sourced from ChatGPT</p></blockquote></details><ol><li>Click on your profile picture in the upper right corner of the GitHub web page.</li><li>In the dropdown panel, click on &#96;Settings&#96;&#96;.</li><li>On the left sidebar, click on <code>Developer settings</code>.</li><li>Click on <code>Personal access tokens (classic)&quot; under &quot;Access tokens</code>.</li><li>In the upper-right corner, click on <code>Generate new token</code>.</li><li>Choose <code>Generate new token (classic)</code>.</li><li>Set <code>Expiration&quot; to &quot;No expiration</code>.</li><li>Under <code>Select scopes</code>, check the <code>repo</code> option.</li><li>Scroll to the bottom of the page and click <code>Generate token</code>.</li><li>Copy the generated token. Please note that once you leave this page, you won’t be able to see this token again, so be sure to store it securely.</li></ol><div class="carousel-container"><div class="splide" data-splide='{"heightRatio":0.618,"lazyLoad":false,"type":"slide","autoplay":false,"interval":3000,"pauseOnHover":true}' data-caption-id="carousel-caption-0z6msjhv8"><div class="splide__track"><ul class="splide__list"><li class="splide__slide" data-caption="1-2.webp"><img data-src="https://s2.loli.net/2023/10/19/MCX8r6medVjocbq.webp" alt="1-2.webp" class="zoomable"></li><li class="splide__slide" data-caption="3.webp"><img data-src="https://s2.loli.net/2023/10/19/nGbz1mhuYMXlEIV.webp" alt="3.webp" class="zoomable"></li><li class="splide__slide" data-caption="4-6.webp"><img data-src="https://s2.loli.net/2023/10/19/HyqLWKu5wg8B3hJ.webp" alt="4-6.webp" class="zoomable"></li><li class="splide__slide" data-caption="7-8.webp"><img data-src="https://s2.loli.net/2023/10/19/8oPj7UqBV4Ynscv.webp" alt="7-8.webp" class="zoomable"></li><li class="splide__slide" data-caption="9.webp"><img data-src="https://s2.loli.net/2023/10/19/y4T2RbD7UEWQY6Z.webp" alt="9.webp" class="zoomable"></li><li class="splide__slide" data-caption="10.webp"><img data-src="https://s2.loli.net/2023/10/19/ZfOqEgM3Yh97oTW.webp" alt="10.webp" class="zoomable"></li></ul></div></div><div id="carousel-caption-0z6msjhv8" class="carousel-caption"></div></div><h2 id="Set-Up-Secrets"><a href="#Set-Up-Secrets" class="headerlink" title="Set Up Secrets"></a>Set Up Secrets</h2><p>The token we obtained has full access to the repository and should not appear in plain text in the workflow files. GitHub allows us to use the “repository secrets” feature to securely store the token as a variable in the repository, reducing the risk of it being exposed.</p><details class="note primary"><summary><p>About Repository Secrets</p></summary><p>GitHub repository secrets are a way to store sensitive or confidential information for use in GitHub Actions workflows, jobs, and other parts of a GitHub repository. These secrets serve several purposes:</p><ol><li><p><strong>Securely Storing Sensitive Data</strong>: Secrets provide a secure way to store sensitive data, such as access tokens, passwords, API keys, and more. This data should not typically be stored in plain text within code or workflow files, as it poses a security risk.</p></li><li><p><strong>Used in GitHub Actions Workflows</strong>: You can pass secrets to GitHub Actions workflows for various automated operations like building, deploying, and testing. This ensures that sensitive information is not exposed in workflow outputs.</p></li><li><p>Accessing External Services: Secrets can be used to access external services and APIs, such as deploying to cloud services or authenticating with integrations. They allow you to securely use these services within workflows without exposing confidential data.</p></li><li><p>Flexibility: Secrets allow you to create and manage multiple secrets as needed. This enables you to use different keys and tokens for various workflows and scenarios, minimizing security risks.</p></li><li><p>Automated Operations: GitHub Actions can automatically use secrets within workflows, eliminating the need to manually input sensitive information and improving the efficiency of automated operations.</p></li><li><p>Updates and Rotation: GitHub repository secrets allow you to periodically update or rotate sensitive information for enhanced security.</p></li></ol><p>Please note that GitHub repository secrets are restricted and undergo security review. Only individuals with appropriate repository access can access and manage them, ensuring the secrets’ security and confidentiality.</p><blockquote><p>Sourced from ChatGPT</p></blockquote></details><details class="note primary"><summary><p>How Repository Secrets are Used in Workflows</p></summary><p>The principle of using repository secrets in GitHub Actions workflows works as follows:</p><ol><li><p><strong>Creating a Repository Secret</strong>: In your GitHub repository’s settings, you create a repository secret and assign it a name (key) and corresponding value. This secret is stored securely by GitHub and can be accessed only by authorized users and workflows.</p></li><li><p><strong>Environment Variables in Workflows</strong>: In your GitHub Actions workflow file, you can reference a repository secret using <code>$</code> syntax. This syntax allows you to access the value of the repository secret without directly including sensitive information in the workflow file.</p></li><li><p><strong>Passing to Workflow Environment Variables</strong>: When GitHub Actions runs a workflow, it passes the values of repository secrets to environment variables within the workflow’s execution environment. These environment variables are accessible within the workflow and can be used like regular environment variables.</p></li><li><p><strong>Security</strong>: GitHub protects these secrets to ensure they are not exposed or directly accessible outside of the workflow. This means that secrets are not visible in workflow outputs, logs, or other visual outputs. Only the code within the workflow itself can access them.</p></li><li><p><strong>Using Secrets</strong>: Within the workflow, you can use these environment variables, such as access tokens or API keys, to perform operations requiring authentication or sensitive data, such as accessing private repositories, deploying to cloud services, and communicating with external APIs.</p></li></ol><p>In summary, repository secrets provide a secure way to store and access sensitive information within workflows without exposing it to the outside. This enables GitHub Actions to handle sensitive data in automated processes without hard-coding it into workflow files, enhancing security and maintainability.</p><blockquote><p>Sourced from ChatGPT</p></blockquote></details><p>Here are the steps to set up secrets:</p><ol><li>Open the settings page of your blog repository.</li><li>Click on <code>Actions</code> under <code>Secrets and variables</code> on the left sidebar.</li><li>Click on <code>New repository secret</code>.</li><li>For the <code>Name,</code> I’ve set it as <code>PAT_TOKEN_PROFILE</code>.</li><li>Paste the token obtained in the previous step into the <code>Secret</code>.</li><li>Click <code>Add Secret</code>.</li></ol><div class="carousel-container"><div class="splide" data-splide='{"heightRatio":0.618,"lazyLoad":false,"type":"slide","autoplay":false,"interval":3000,"pauseOnHover":true}' data-caption-id="carousel-caption-x5cpc40x3"><div class="splide__track"><ul class="splide__list"><li class="splide__slide" data-caption="1-3.webp"><img data-src="https://s2.loli.net/2023/10/19/Yb8BGd2ePlEMWRn.webp" alt="1-3.webp" class="zoomable"></li><li class="splide__slide" data-caption="4-6.webp"><img data-src="https://s2.loli.net/2023/10/19/qzHiYgNlOWtyVLw.webp" alt="4-6.webp" class="zoomable"></li><li class="splide__slide" data-caption="a.webp"><img data-src="https://s2.loli.net/2023/10/19/PItMG7ikaYb3CqF.webp" alt="a.webp" class="zoomable"></li></ul></div></div><div id="carousel-caption-x5cpc40x3" class="carousel-caption"></div></div><h1 id="Workflows-Configuration"><a href="#Workflows-Configuration" class="headerlink" title="Workflows Configuration"></a>Workflows Configuration</h1><p>Next, let’s configure workflows for both repositories. The blog repository only requires a simple workflow, while the profile repository needs a script file to be created and identifiers to be added to the README.</p><h2 id="Profile-Repository"><a href="#Profile-Repository" class="headerlink" title="Profile Repository"></a>Profile Repository</h2><p>We’ll start with the settings for the Profile repository. Clone the repository to your local machine, edit it locally, and then push it back to GitHub.</p><h3 id="Create-a-Workflow"><a href="#Create-a-Workflow" class="headerlink" title="Create a Workflow"></a>Create a Workflow</h3><p>Create a file named <code>update-readme.yml</code> in your local directory at <code>./source/.github/workflows/</code>. The <code>./.github/workflows/</code> directory is where GitHub Actions stores workflow files by default. Be sure to include the leading <code>.</code> when creating the directory. Copy the following code into this file:</p><figure class="highlight yml"><figcaption><span>update-readme.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Update</span> <span class="string">Latest</span> <span class="string">Blog</span> <span class="string">Posts</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">repository_dispatch:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">update-my-profile</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">update-readme:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">code</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">node-version:</span> <span class="number">14</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">node-fetch</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">node-fetch</span></span><br><span class="line">      </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">feedparser</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">feedparser</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Update</span> <span class="string">README</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">node</span> <span class="string">update-readme.mjs</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">if</span> <span class="string">README</span> <span class="string">has</span> <span class="string">changed</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">readme-check</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        git fetch origin master</span></span><br><span class="line"><span class="string">        changed_files=$(git diff --name-only origin/master)</span></span><br><span class="line"><span class="string">        if echo &quot;$changed_files&quot; | grep -q &#x27;README.md&#x27;; then</span></span><br><span class="line"><span class="string">          echo &quot;readme_changed=true&quot; &gt;&gt; $GITHUB_ENV</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          echo &quot;readme_changed=false&quot; &gt;&gt; $GITHUB_ENV</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Commit</span> <span class="string">and</span> <span class="string">push</span> <span class="string">changes</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        if [[ &quot;$&#123;&#123; env.readme_changed &#125;&#125;&quot; == &quot;true&quot; ]]; then</span></span><br><span class="line"><span class="string">          git config --local user.name &#x27;github-actions[bot]&#x27;</span></span><br><span class="line"><span class="string">          git config --local user.email &#x27;github-actions[bot]@users.noreply.github.com&#x27;</span></span><br><span class="line"><span class="string">          git add README.md</span></span><br><span class="line"><span class="string">          git commit -m &quot;Update README with latest blog posts&quot;</span></span><br><span class="line"><span class="string">          git push</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          echo &quot;README.md has not changed. Skipping commit and push.&quot;</span></span><br><span class="line"><span class="string">        fi</span></span><br></pre></td></tr></table></figure><p>The purpose of this workflow is as follows:</p><ol><li>It starts running when a <code>repository_dispatch</code> event is received from the blog repository.</li><li>It installs and sets up the Node.js environment. We use Node 14 in this example, as newer versions of Node may cause GitHub Actions to terminate unexpectedly during execution.</li><li>It installs the necessary Node.js modules, including <code>node-fetch</code> and <code>feedparser</code>:<ul><li><code>node-fetch</code> is a library for making HTTP requests in a Node.js environment. It provides an easy way to initiate HTTP requests and handle responses, similar to the Fetch API in browsers.</li><li><code>feedparser</code> is a Node.js module for parsing RSS and Atom feeds and converting them into JavaScript objects for easier handling.</li></ul></li><li>It runs a Node script.</li><li>Check if <code>README.md</code> has changed. This step is added because sometimes I update old blog posts, and in such cases, the “latest blog posts” section remains unchanged.<ul><li>If there are changes, commit and push the relevant updates.</li><li>If there are no changes, skip this step.</li></ul></li></ol><div class="note warning"><p>Please note: If your main branch is named <code>main</code>, you need to modify the following two lines in “Check if README has changed” by replacing <code>master</code> with <code>main</code>:</p><ul><li>git fetch origin main</li><li>changed_files&#x3D;$(git diff –name-only origin&#x2F;main)</li></ul></div><details class="note primary"><summary><p>About repository_dispatch</p></summary><p><code>repository_dispatch</code> is an event type in GitHub Actions that allows you to manually trigger workflows defined in a repository. This feature is useful for scenarios where you need to start automated tasks manually in specific situations.</p><p>Here is more detailed information about <code>repository_dispatch</code>:</p><ul><li><p><strong>Manually Triggering Workflows</strong>: <code>repository_dispatch</code> enables you to manually trigger a GitHub Actions workflow defined in your repository. This means you can start the execution of the workflow when needed, without relying on specific events like push, pull request, and so on.</p></li><li><p><strong>Custom Event Types</strong>: You can specify a custom event type for <code>repository_dispatch</code>. This event type can be defined by you to describe the purpose or operation to be triggered. For example, you can define an event type as “update-my-profile” to indicate triggering a workflow to update a user profile.</p></li><li><p><strong>Payload Data</strong>: You can also choose to include some payload data, which will be sent when triggering the workflow. Payload data is a JSON object that can contain any information you need to pass to the workflow to help it perform specific actions.</p></li><li><p><strong>GitHub API Access Permissions</strong>: Triggering a <code>repository_dispatch</code> event requires appropriate GitHub API permissions. Typically, you need to have push access to the code or be a repository administrator to trigger a <code>repository_dispatch</code> event.</p></li></ul><blockquote><p>Sourced from ChatGPT</p></blockquote></details><h3 id="Set-Workflow-R-W-Permissions"><a href="#Set-Workflow-R-W-Permissions" class="headerlink" title="Set Workflow R&#x2F;W Permissions"></a>Set Workflow R&#x2F;W Permissions</h3><p>By default, workflows have read-only access to the files in the repository. To grant write access, follow these steps:</p><ol><li>Open the <code>Settings</code> for your Profile repository.</li><li>Click on <code>General</code> under the <code>Actions</code> option in the left sidebar.</li><li>Change the <code>Workflow permissions</code> to <code>Read and write permissions</code>.</li><li>Click <code>Save</code>.</li></ol><div class="carousel-container"><div class="splide" data-splide='{"heightRatio":0.618,"lazyLoad":false,"type":"slide","autoplay":false,"interval":3000,"pauseOnHover":true}' data-caption-id="carousel-caption-m2u9xgh8u"><div class="splide__track"><ul class="splide__list"><li class="splide__slide" data-caption="1-4.webp"><img data-src="https://s2.loli.net/2023/10/19/jUoBOJmAY9utS8h.webp" alt="1-4.webp" class="zoomable"></li></ul></div></div><div id="carousel-caption-m2u9xgh8u" class="carousel-caption"></div></div><h3 id="Create-a-Node-Script"><a href="#Create-a-Node-Script" class="headerlink" title="Create a Node Script"></a>Create a Node Script</h3><p>In the root directory of your Profile repository, create a file named <code>update-readme.mjs</code>. Please note that the file format should be <code>mjs</code> rather than <code>js</code>.</p><p>I initially used the <code>js</code> format, but it resulted in errors during GitHub Actions execution due to module import issues, although the exact reason remains unknown.</p><details class="note primary"><summary><p>About .js and .mjs Formats</p></summary><p>Both <code>.mjs</code> and <code>.js</code> files are extensions for JavaScript files, but they have some key differences:</p><ol><li><p><strong>Module Types</strong>:</p><ul><li><code>.mjs</code> files are recognized as ECMAScript modules (ES modules), which means they utilize the native JavaScript module system with <code>import</code> and <code>export</code> statements for module import and export. ES modules are the official module standard for JavaScript and are commonly used in modern JavaScript development.</li><li><code>.js</code> files can be traditional CommonJS modules (Node.js modules) using the <code>require()</code> and <code>module.exports</code> syntax for module import and export. CommonJS is the module system initially introduced by Node.js but can also be used in browsers with tools like Browserify or Webpack for support.</li></ul></li><li><p><strong>Default Behavior</strong>:</p><ul><li>In Node.js, by default, <code>.js</code> files are treated as CommonJS modules unless explicitly specified in the code to use ES modules. This means you can omit the file extension (e.g., <code>.js</code>), and Node.js will automatically look for CommonJS modules.</li><li><code>.mjs</code> files are treated as ES modules by default, and you need to specify the file extension explicitly during import or execution (e.g., <code>import foo from &#39;./module.mjs&#39;</code>).</li></ul></li><li><p><strong>Browser Support</strong>:</p><ul><li>ES modules are widely supported in browsers, allowing you to use <code>.mjs</code> files as modules in a browser environment.</li><li>Browser support for CommonJS modules is limited and typically requires the use of tools (e.g., Browserify) to transform CommonJS modules into code that can run in a browser.</li></ul></li><li><p><strong>Node.js Versions</strong>:</p><ul><li><code>.mjs</code> files require a Node.js runtime environment of version 13.2.0 or higher to support ES modules’ default behavior. In earlier versions of Node.js, you need to explicitly enable ES module support.</li><li><code>.js</code> files have broader support and work in earlier versions of Node.js without special configuration.</li></ul></li></ol><p>In summary, the choice between <code>.mjs</code> and <code>.js</code> depends on your project requirements and the target environment. If you are working in Node.js and want to use ES modules, you can choose the <code>.mjs</code> file format. If you need to use modules in a browser, ES modules are the more common choice, although you can transform CommonJS modules into ES modules.</p><blockquote><p>Sourced from ChatGPT</p></blockquote></details><p>The script code is as follows:</p><figure class="highlight mjs"><figcaption><span>update-readme.mjs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; readFile, writeFile &#125; <span class="keyword">from</span> <span class="string">&#x27;fs/promises&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">FeedParser</span> <span class="keyword">from</span> <span class="string">&#x27;feedparser&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateReadme</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> rssUrl = <span class="string">&#x27;https://siriusq.top/en/atom.xml&#x27;</span>;  <span class="comment">// Replace this with the RSS Feed link of your blog</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(rssUrl);</span><br><span class="line">    <span class="keyword">const</span> feedparser = <span class="keyword">new</span> <span class="title class_">FeedParser</span>();</span><br><span class="line"></span><br><span class="line">    response.<span class="property">body</span>.<span class="title function_">pipe</span>(feedparser);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> posts = [];</span><br><span class="line"></span><br><span class="line">    feedparser.<span class="title function_">on</span>(<span class="string">&#x27;readable&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> item;</span><br><span class="line">      <span class="keyword">while</span> ((item = <span class="variable language_">this</span>.<span class="title function_">read</span>())) &#123;</span><br><span class="line">        <span class="keyword">if</span> (posts.<span class="property">length</span> &lt; <span class="number">7</span>) &#123; <span class="comment">// Get the latest 7 blog posts</span></span><br><span class="line">          <span class="keyword">const</span> title = item.<span class="property">title</span>;</span><br><span class="line">          <span class="keyword">const</span> link = item.<span class="property">link</span>;</span><br><span class="line">          posts.<span class="title function_">push</span>(<span class="string">`- [<span class="subst">$&#123;title&#125;</span>](<span class="subst">$&#123;link&#125;</span>)`</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    feedparser.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (posts.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// Read the README file</span></span><br><span class="line">        <span class="keyword">const</span> readme = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">&#x27;README.md&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update the content between the identifier tags in the README file</span></span><br><span class="line">        <span class="keyword">const</span> updatedReadme = readme.<span class="title function_">replace</span>(</span><br><span class="line">          <span class="regexp">/&lt;!-- Start_Position --&gt;.*&lt;!-- End_Position --&gt;/</span>s,</span><br><span class="line">          <span class="string">`&lt;!-- Start_Position --&gt;\n<span class="subst">$&#123;posts.join(<span class="string">&#x27;\n&#x27;</span>)&#125;</span>\n&lt;!-- End_Position --&gt;`</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Write back to the README file</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">writeFile</span>(<span class="string">&#x27;README.md&#x27;</span>, updatedReadme);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;README updated successfully!&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;No blog posts found.&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Update failed:&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">updateReadme</span>();</span><br></pre></td></tr></table></figure><div class="note warning"><p>Please note:</p><ul><li>Replace <code>const rssUrl = &#39;https://siriusq.top/en/atom.xml&#39;</code> with the RSS Feed link of your blog.</li><li><code>if (posts.length &lt; 7)</code> is used to control the number of blog posts displayed, with the default set to 7 posts.</li></ul></div><h3 id="Adding-Identifiers-to-README"><a href="#Adding-Identifiers-to-README" class="headerlink" title="Adding Identifiers to README"></a>Adding Identifiers to README</h3><p>Next, we need to add two identifiers to the README file in your Profile repository. When the Workflow is triggered, the content between these two identifiers will automatically update with the latest blog post titles and links.</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Start<span class="emphasis">_Position --&gt;</span></span><br><span class="line"><span class="emphasis">&lt;!-- End_</span>Position --&gt;</span><br></pre></td></tr></table></figure><p>Here’s an example of what it would look like in your README:</p><figure class="highlight md"><figcaption><span>README.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Other Contents......</span><br><span class="line"></span><br><span class="line"><span class="section">### 📝 Latest Blog Posts</span></span><br><span class="line">The following are my latest 7 blog posts:</span><br><span class="line"></span><br><span class="line">&lt;!-- Start<span class="emphasis">_Position --&gt;</span></span><br><span class="line"><span class="emphasis">- [<span class="string">Quick Setup Guide for LaTeX in VSCode</span>](<span class="link">https://siriusq.top/en/latex-vscode-quick-config.html</span>)</span></span><br><span class="line"><span class="emphasis">- [<span class="string">Accessing Windows Shared Folders on iPhone</span>](<span class="link">https://siriusq.top/en/ios-windows-file-share.html</span>)</span></span><br><span class="line"><span class="emphasis">- [<span class="string">Stellaris Mod Creation and Upload Log</span>](<span class="link">https://siriusq.top/en/stellaris-mod.html</span>)</span></span><br><span class="line"><span class="emphasis">- [<span class="string">Bongo Paw Clicker Development Summary</span>](<span class="link">https://siriusq.top/en/bongo-paw-blicker.html</span>)</span></span><br><span class="line"><span class="emphasis">- [<span class="string">Enabling Integrated Graphics with Discrete Graphics Installed</span>](<span class="link">https://siriusq.top/en/turn-on-igpu.html</span>)</span></span><br><span class="line"><span class="emphasis">- [<span class="string">MacBook Pro Headless</span>](<span class="link">https://siriusq.top/en/macbook-pro-headless.html</span>)</span></span><br><span class="line"><span class="emphasis">&lt;!-- End_</span>Position --&gt;</span><br><span class="line"></span><br><span class="line">Other Contents......</span><br></pre></td></tr></table></figure><p>Finally, make sure to push these changes to GitHub.</p><h2 id="Blog-Repository"><a href="#Blog-Repository" class="headerlink" title="Blog Repository"></a>Blog Repository</h2><h3 id="Create-a-Workflow-1"><a href="#Create-a-Workflow-1" class="headerlink" title="Create a Workflow"></a>Create a Workflow</h3><p>The workflow for your blog repository also needs to be created locally and then pushed to the GitHub repository. This is because the Hexo framework completely replaces all files in the GitHub remote repository, including custom GitHub Actions, during deployment.</p><p>To get started, create a file named <code>.github/workflows/update-my-profile.yml</code> in the <code>source</code> directory of your blog. Then, paste the following code into this file:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Trigger</span> <span class="string">Profile</span> <span class="string">Update</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="string">page_build</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">trigger-my-profile-update:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Dispatch</span> <span class="string">event</span> <span class="string">to</span> <span class="string">Profile</span> <span class="string">Repo</span></span><br><span class="line">      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">GITHUB_PROFILE_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PAT_TOKEN_PROFILE</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        curl -X POST \</span></span><br><span class="line"><span class="string">        -H &quot;Authorization: token $GITHUB_PROFILE_TOKEN&quot; \</span></span><br><span class="line"><span class="string">        -H &quot;Accept: application/vnd.github.everest-preview+json&quot; \</span></span><br><span class="line"><span class="string">        https://api.github.com/repos/[USERNAME]/[USERNAME]/dispatches \</span></span><br><span class="line"><span class="string">        --data &#x27;&#123;&quot;event_type&quot;: &quot;update-my-profile&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>The purpose of this workflow is to trigger another workflow in the Profile repository, which we previously set up as <code>update-my-profile</code>, using the <code>repository_dispatch</code> event. This happens when a page is successfully built in your blog.</p><div class="note warning"><p>Please note:</p><ul><li>Replace the two <code>[USERNAME]</code> placeholders in the second-to-last line with your GitHub username, without the square brackets.</li><li>The value for the <code>GITHUB_PROFILE_TOKEN</code> variable corresponds to the <code>Name</code> of the <code>Secret</code> we set up earlier.</li></ul></div><h3 id="Modify-Hexo-Configuration"><a href="#Modify-Hexo-Configuration" class="headerlink" title="Modify Hexo Configuration"></a>Modify Hexo Configuration</h3><p>If you were to attempt to regenerate your blog’s static files and deploy them to the remote repository at this point, you might notice that the workflow you just set up is not appearing in GitHub Actions. This is because files and folders with a prefix of <code>.</code> are considered hidden files on Unix and Linux systems, and the <code>hexo g</code> and <code>hexo d</code> commands will, by default, ignore these hidden files. This includes the folder <code>.github</code> where we placed our workflow. To address this, we’ll modify the configuration file of the Hexo framework to include our workflow during the generation and deployment process.</p><p>First, open the Hexo framework’s configuration file, <code>_config.yml</code>. Locate the <code>include</code> setting by searching and add the path to your workflow file:</p><figure class="highlight yaml"><figcaption><span>Workflow file path</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">.github/workflows/update-my-profile.yml</span></span><br></pre></td></tr></table></figure><p>For example:</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Include / Exclude file(s)</span></span><br><span class="line"><span class="comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span></span><br><span class="line"><span class="attr">include:</span> <span class="string">.github/workflows/update-my-profile.yml</span></span><br><span class="line"><span class="attr">exclude:</span></span><br><span class="line"><span class="attr">ignore:</span></span><br></pre></td></tr></table></figure><p>Next, locate the <code>deploy</code> setting by searching and add a line at the bottom with <code>ignore_hidden: false</code>, as shown below:</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:Siriusq/en.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">ignore_hidden:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>Additionally, when the Hexo framework generates static files, it converts YAML files to JSON format, which GitHub Actions does not support. This could cause the previously set up workflow to become ineffective. To resolve this, we need to add the workflow file path to <code>skip_render</code>. This way, the Hexo framework will copy it as is to the public folder when generating files. For example:</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span> <span class="string">.github/workflows/update-my-profile.yml</span></span><br></pre></td></tr></table></figure><p>Save your changes, and then run the <code>hexo cl</code> and <code>hexo g -d</code> commands. If all goes well, a few minutes later, you should see your updated Profile automatically.</p><div class="carousel-container"><div class="splide" data-splide='{"heightRatio":0.618,"lazyLoad":false,"type":"slide","autoplay":false,"interval":3000,"pauseOnHover":true}' data-caption-id="carousel-caption-46fmrztq5"><div class="splide__track"><ul class="splide__list"><li class="splide__slide" data-caption="21.webp"><img data-src="https://s2.loli.net/2023/10/19/oMWf2XS6GavL8jt.webp" alt="21.webp" class="zoomable"></li><li class="splide__slide" data-caption="22.webp"><img data-src="https://s2.loli.net/2023/10/19/4WpxQZuj6IOmcDo.webp" alt="22.webp" class="zoomable"></li></ul></div></div><div id="carousel-caption-46fmrztq5" class="carousel-caption"></div></div><div class="note default"><p>PS: I originally wanted ChatGPT to provide me with a complete solution, including code, where I could simply copy and paste to quickly complete the task. However, ChatGPT has made me deeply realize the frustration of spending 5 minutes generating code and a whole day debugging. My attempt at taking shortcuts has failed miserably.</p><p>The image below reflects my state of mind while writing this blog post.</p><p><img data-src="https://s2.loli.net/2023/10/19/qs9INfATvKBamn2.webp" alt="how-openai-chatgpt-helps-software-development.webp"></p></div></div><footer class="post-footer"><div><div style="text-align:center;color:#ccc;font-size:14px">---------- This article ends here. <i class="fa fa-dice-d20"></i> Thank you for reading! ----------</div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>Post author: </strong>Sirius</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://siriusq.top/en/auto-update-profile-latest-blog-posts.html" title="Automatically Update the Recent Blog Posts Section in the Custom Profile README When a GitHub Pages-Based Blog Is Updated.">https://siriusq.top/en/auto-update-profile-latest-blog-posts.html</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="post-tags"><a href="/en/tags/Hexo/" rel="tag"><i class="fa fa-tag"></i> Hexo</a> <a href="/en/tags/GitHub-Pages/" rel="tag"><i class="fa fa-tag"></i> GitHub Pages</a> <a href="/en/tags/GitHub-Actions/" rel="tag"><i class="fa fa-tag"></i> GitHub Actions</a></div><div class="post-nav"><div class="post-nav-item"><a href="/en/latex-vscode-quick-config.html" rel="prev" title="Quick Setup Guide for LaTeX in VSCode"><i class="fa fa-angle-left"></i> Quick Setup Guide for LaTeX in VSCode</a></div><div class="post-nav-item"><a href="/en/clash-verge-tun-config.html" rel="next" title="Clash Verge TUN Mode Configuration Guide">Clash Verge TUN Mode Configuration Guide <i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments gitalk-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Sirius</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="Word count total">143k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="Reading time total">8:41</span></span></div><div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("03/31/2019 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="This site has been running safely for "+dnum+" days ",document.getElementById("times").innerHTML=hnum+" hrs "+mnum+" mins "+snum+" secs"}setInterval("createtime()",250)</script></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/sidebar.js"></script><script src="/en/js/next-boot.js"></script><script src="/en/js/bookmark.js"></script><script src="/en/js/pjax.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script src="/en/js/third-party/fancybox.js"></script><script src="/en/js/third-party/pace.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://siriusq.top/en/auto-update-profile-latest-blog-posts.html"}</script><script src="/en/js/third-party/quicklink.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous"><script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"Siriusq","repo":"gitalk-commnet","client_id":"4217cae26df745a55acd","client_secret":"b7f2cc0c82be38a4e0f294f12f761bc4799669cd","admin_user":"Siriusq","distraction_free_mode":false,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"90769ceca4f10ba5eb0fb8730b404407"}</script><script src="/en/js/third-party/comments/gitalk.js"></script><script type="text/javascript" src="/en/js/crash_cheat.js"></script><script async src="/en/js/fireworks.js"></script><script src="https://unpkg.com/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script><script>window.splideStyles={arrowColor:"#fc8d5d",arrowHoverColor:"#fc6423",paginationColor:"#fc8d5d",paginationActiveColor:"#fc6423",paginationHoverColor:"#fc6423",borderRadius:"1px",borderColor:{light:"#eee",dark:"#444"},shadowColor:{light:"rgba(0, 0, 0, 0.1)",dark:"rgba(0, 0, 0, 0.3)"}},window.splideDarkMode="auto",window.mediumZoomEnabled=!1</script><script type="text/javascript">// 页面加载事件监听
document.addEventListener('DOMContentLoaded', function () {
    splideLoadingHandler();
    initGlobalMediumZoom();
});

document.addEventListener('pjax:success', function () {
    splideLoadingHandler();
    initGlobalMediumZoom();
});

// PJAX开启时销毁所有splide实例，不然开启自动播放时图片简介和图片对不上
document.addEventListener('pjax:send', () => {
    destroySplideInstances();
});

window.splideInstances = [];
function destroySplideInstances() {
    window.splideInstances.forEach((instance) => {
        instance.destroy(); // 销毁实例
    });
    window.splideInstances = []; // 清空数组
}

// Splid 加载处理
function splideLoadingHandler() {
    // 检查页面是否含有轮播图片
    const splideEl = document.querySelector('.splide');
    if (!splideEl) {
        return; // 如果不存在轮播，则不执行初始化
    }

    // 检查是否开启Next主题的动画
    const isMotionEnabled = typeof CONFIG !== 'undefined' && CONFIG && CONFIG.motion && CONFIG.motion.enable;
    if (isMotionEnabled) {
        // Motion 开启时延迟加载轮播组件，等待动画完成。把组件加入动画有bug，一直搞不定，只能曲线救国
        setTimeout(function () {
            // 初始化轮播组件
            initSplide();
        }, 500);  // 延迟 500ms，确保动画完成后再初始化
    } else {
        // Motion 关闭时立即初始化
        initSplide();
    }

    // 处理 fancybox，默认设置会切换焦点图片造成轮播组件混乱
    if (typeof Fancybox !== "undefined") {
        adjustFancybox();
    }

    // 初始化轮播组件中的 Medium Zoom
    if (mediumZoomEnabled) {
        initCarouselMediumZoom();
    }

    // 应用主题样式
    applySplideStyle();
}

// 初始化 Splide
function initSplide() {
    const splideElements = document.querySelectorAll('.splide');
    splideElements.forEach(splideEl => {
        const options = JSON.parse(splideEl.getAttribute('data-splide'));
        // 如果轮播组件中只有一张图片，则隐藏箭头
        const slideCount = splideEl.querySelectorAll('.splide__slide').length;
        if (slideCount <= 1) {
            options.arrows = false;
        }
        // 简介设置
        const splide = new Splide(splideEl, options);
        splide.on('mounted move', function () {
            const activeSlide = splide.Components.Slides.getAt(splide.index);
            const caption = activeSlide.slide.dataset.caption;
            const captionId = splideEl.getAttribute('data-caption-id');

            const captionElement = document.getElementById(captionId);
            if (captionElement) {
                captionElement.innerText = caption || '';  // 如果没有简介，设置为空字符串
            }
        });
        splide.mount();
        window.splideInstances.push(splide); // 将实例存储到数组中   
    });
}

// 应用主题明暗样式
function applySplideStyle() {
    const applyThemeStyles = (theme, splideStyles) => {
        const borderColor = theme === 'dark' ? splideStyles.borderColor.dark : splideStyles.borderColor.light;
        const shadowColor = theme === 'dark' ? splideStyles.shadowColor.dark : splideStyles.shadowColor.light;
        document.documentElement.style.setProperty('--carousel-border-color', borderColor);
        document.documentElement.style.setProperty('--carousel-shadow-color', shadowColor);
        document.documentElement.style.setProperty('--carousel-border-radius', splideStyles.borderRadius);
        document.documentElement.style.setProperty('--carousel-arrow-color', splideStyles.arrowColor);
        document.documentElement.style.setProperty('--carousel-arrow-hover-color', splideStyles.arrowHoverColor);
        document.documentElement.style.setProperty('--carousel-pagination-color', splideStyles.paginationColor);
        document.documentElement.style.setProperty('--carousel-pagination-active-color', splideStyles.paginationActiveColor);
        document.documentElement.style.setProperty('--carousel-pagination-hover-color', splideStyles.paginationHoverColor);
    };

    let theme = 'light';
    if (window.splideDarkMode === 'auto') {
        theme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    } else if (window.splideDarkMode === 'true') {
        theme = 'dark';
    }
    applyThemeStyles(theme, window.splideStyles);

    if (window.splideDarkMode === 'auto') {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            applyThemeStyles(e.matches ? 'dark' : 'light', window.splideStyles);
        });
    }
}

// 初始化非轮播图片的 Medium Zoom
function initGlobalMediumZoom() {
    // 检查是否启用 medium-zoom
    if (!mediumZoomEnabled) {
        return;
    }
    const zoomOutsideCarousel = mediumZoom('img:not(.splide .zoomable)', {
        background: 'rgba(0, 0, 0, 0.8)',
        margin: 24
    });
}

// 初始化轮播组件中的 Medium Zoom
function initCarouselMediumZoom() {
    const zoomCarousel = mediumZoom('.zoomable', {
        background: 'rgba(0, 0, 0, 0.8)',
        margin: 24,
        onOpen: (zoom) => {
            const img = zoom.target; // 获取正在缩放的图片
            img.classList.add('zooming'); // 添加一个缩放时的 class
        },
        onClose: (zoom) => {
            const img = zoom.target; // 获取缩放的图片
            img.classList.remove('zooming'); // 移除缩放时的 class
        }
    });

    zoomCarousel.on('open', () => {
        // 隐藏箭头和分页按钮
        document.querySelectorAll('.splide__arrow, .splide__pagination').forEach(el => {
            el.style.display = 'none';
        });
    });

    zoomCarousel.on('close', () => {
        // 重新显示箭头和分页按钮
        document.querySelectorAll('.splide__arrow, .splide__pagination').forEach(el => {
            el.style.display = '';
        });
    });
}

// fancybox 兼容调整
function adjustFancybox() {
    Fancybox.bind("[data-fancybox]", {
        placeFocusBack: false,  // 禁止 Fancybox 关闭时滚动回页面的焦点位置
    });

    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.type === "childList") {
                removeFancyboxFromClones();
            }
        });
    });

    // 观察整个文档的 DOM 变化
    observer.observe(document, { childList: true, subtree: true });
}

// 移除克隆 Slide 中的 Fancybox 链接
function removeFancyboxFromClones() {
    const cloneSlides = document.querySelectorAll('.splide__slide--clone');

    cloneSlides.forEach((slide) => {
        const fancyboxLink = slide.querySelector('a.fancybox');
        if (fancyboxLink) {
            const img = fancyboxLink.querySelector('img');
            if (img) {
                // 将 img 挪出 a 标签
                fancyboxLink.replaceWith(img);
            }
        }
    });
}</script></body></html>