<!DOCTYPE html><html lang="en"><head><link href="https://unpkg.com/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet"><style type="text/css">.splide{border:2px solid var(--carousel-border-color);box-shadow:0 4px 8px var(--carousel-shadow-color);border-radius:var(--carousel-border-radius)}.splide__slide img{width:100%;height:100%;object-fit:contain}.carousel-container{visibility:inherit;margin-top:20px;margin-bottom:20px}.carousel-caption{min-height:2em;line-height:2em;text-align:center;font-size:.9em;font-style:italic;padding:6px;margin-left:auto;margin-right:auto}.splide__arrow{background:0 0;align-items:center;border:0;cursor:pointer;display:flex;height:5em;justify-content:center;position:absolute;top:50%;transform:translateY(-50%);width:5em;z-index:10}.splide__arrow:disabled{opacity:0}.splide__arrow--prev{left:0}.splide__arrow--next{right:0}.splide__arrow svg{fill:var(--carousel-arrow-color);height:2.5em;transition:fill .2s linear;width:2.5em}.splide__arrow:hover:not(:disabled) svg{fill:var(--carousel-arrow-hover-color)}.splide__arrow:focus-visible{outline:transparent;outline-offset:0}.splide.is-focus-in .splide__arrow:focus{outline:transparent;outline-offset:0}.splide__pagination__page:focus-visible{outline:transparent;outline-offset:0}.splide.is-focus-in .splide__pagination__page:focus{outline:transparent;outline-offset:0}.splide__pagination{bottom:1em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:var(--carousel-pagination-color);border:0;border-radius:2.5px;display:inline-block;height:5px;margin:3px;width:20px;transition:background-color .2s linear}.splide__pagination__page.is-active{background:var(--carousel-pagination-active-color)}.splide__pagination__page:hover{background:var(--carousel-pagination-hover-color);cursor:pointer;opacity:.9}.splide__pagination__page::before{content:'';position:absolute;top:-18px;bottom:-18px;left:-4px;right:-4px}.splide__pagination__page.is-active::before{content:'';position:absolute;top:-12px;bottom:-12px;left:-1px;right:-1px}.zoomable{object-fit:contain}.zooming{max-width:90vw!important;max-height:90vh!important;object-fit:contain!important}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><link rel="manifest" href="/en/images/site.webmanifest"><meta name="msvalidate.01" content="BE3DB9F22A0915AF3452024048D66934"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300italic,400,400italic,700,700italic%7CNoto+Serif:300,300italic,400,400italic,700,700italic%7CFira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-flash.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"siriusq.top","root":"/en/","images":"/en/images","scheme":"Gemini","darkmode":"auto","version":"8.20.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":320,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><meta name="description" content="GFW, up to its usual tricks, employed DNS pollution. My previous blog post on how to use JSDelivr wasn&#39;t even finished when JSDelivr got blocked.üò≠"><meta property="og:type" content="article"><meta property="og:title" content="Solution for GFW Blocking Next Theme&#39;s JSDelivr"><meta property="og:url" content="https://siriusq.top/en/hexo-next-jsdelivr-blocked.html"><meta property="og:site_name" content="Sirius"><meta property="og:description" content="GFW, up to its usual tricks, employed DNS pollution. My previous blog post on how to use JSDelivr wasn&#39;t even finished when JSDelivr got blocked.üò≠"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://s2.loli.net/2022/05/23/DZbmI2lfGTpoRNy.png"><meta property="article:published_time" content="2022-05-21T15:13:56.000Z"><meta property="article:modified_time" content="2023-09-13T03:04:41.000Z"><meta property="article:author" content="Sirius"><meta property="article:tag" content="Hexo"><meta property="article:tag" content="Next"><meta property="article:tag" content="JSDelivr"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/05/23/DZbmI2lfGTpoRNy.png"><link rel="canonical" href="https://siriusq.top/en/hexo-next-jsdelivr-blocked.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://siriusq.top/en/hexo-next-jsdelivr-blocked.html","path":"hexo-next-jsdelivr-blocked.html","title":"Solution for GFW Blocking Next Theme's JSDelivr"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Solution for GFW Blocking Next Theme's JSDelivr | Sirius</title><script src="/en/live2d-widget/autoload.js"></script><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Sirius" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Sirius</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">May the Force be with you</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/en/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/en/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">111</span></a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">76</span></a></li><li class="menu-item menu-item-tools"><a href="/en/tools/" rel="section"><i class="fa fa-screwdriver-wrench fa-fw"></i>Tools</a></li><li class="menu-item menu-item-switch-to-chinese"><a href="https://siriusq.top/" rel="section"><i class="fa fa-language fa-fw"></i>Switch to Chinese</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Just-Update-the-Next-Theme"><span class="nav-number">1.</span> <span class="nav-text">Just Update the Next Theme</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Fixing-Third-party-Plugin-Issues-in-the-Theme"><span class="nav-number">2.</span> <span class="nav-text">Fixing Third-party Plugin Issues in the Theme</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Changing-the-CDN-Provider"><span class="nav-number">2.1.</span> <span class="nav-text">Changing the CDN Provider</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Local-Deployment"><span class="nav-number">2.2.</span> <span class="nav-text">Local Deployment</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Your-Own-Resources"><span class="nav-number">3.</span> <span class="nav-text">Your Own Resources</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Sirius" src="https://s2.loli.net/2022/05/23/kxtRKT4u71HXlUY.gif"><p class="site-author-name" itemprop="name">Sirius</p><div class="site-description" itemprop="description">Thread_sleep(1); //be nice to the CPU</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/en/archives/"><span class="site-state-item-count">76</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/en/categories/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/en/tags/"><span class="site-state-item-count">111</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Siriusq" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;Siriusq" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="/en/atom.xml" title="RSS Feed ‚Üí &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i>RSS Feed</a> </span><span class="links-of-author-item"><a href="mailto:siriusq.top@outlook.com" title="E-Mail ‚Üí mailto:siriusq.top@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://leetcode.com/Siriusq/" title="LeetCode ‚Üí https:&#x2F;&#x2F;leetcode.com&#x2F;Siriusq&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-code fa-fw"></i>LeetCode</a></span></div><script src="/en/js/switch_limited.js"></script></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://siriusq.top/en/hexo-next-jsdelivr-blocked.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://s2.loli.net/2022/05/23/kxtRKT4u71HXlUY.gif"><meta itemprop="name" content="Sirius"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sirius"><meta itemprop="description" content="Thread_sleep(1); //be nice to the CPU"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Solution for GFW Blocking Next Theme's JSDelivr | Sirius"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Solution for GFW Blocking Next Theme's JSDelivr</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-05-21 23:13:56" itemprop="dateCreated datePublished" datetime="2022-05-21T23:13:56+08:00">2022-05-21</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-09-13 11:04:41" itemprop="dateModified" datetime="2023-09-13T11:04:41+08:00">2023-09-13</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Website-Configuration/" itemprop="url" rel="index"><span itemprop="name">Website Configuration</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="Word count in article"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">Word count in article: </span><span>474</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">Reading time &asymp;</span> <span>2 mins.</span></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote class="blockquote-center">GFW, up to its usual tricks, employed DNS pollution. My previous blog post on how to use JSDelivr wasn't even finished when JSDelivr got blocked.üò≠</blockquote><span id="more"></span><div class="note warning"><p>This post was translated from my Chinese blog post with the aid of ChatGpt.</p></div><div class="note success"><h1 id="Just-Update-the-Next-Theme"><a href="#Just-Update-the-Next-Theme" class="headerlink" title="Just Update the Next Theme"></a>Just Update the Next Theme</h1><p>The latest Next theme has switched the CDN used by third-party plugins to cdnjs. Simply upgrade the theme.</p></div><p>Today, when updating the website, I suddenly noticed that the loading speed was extremely slow. When I checked the console, I saw a bunch of errors, all related to resources from JSDelivr not being able to load. After confirming, it turns out that JSDelivr has been blocked by the Great Firewall (GFW) üò≠. Because the Next theme defaults to using JSDelivr as the CDN provider for third-party plugins like Gitalk and FancyBox, the website is basically paralyzed after JSDelivr was blocked.</p><p><img data-src="https://s2.loli.net/2022/05/23/DZbmI2lfGTpoRNy.png" alt="ping"></p><p>EmmmÔºåI guess it won‚Äôt be long before everything turns red. In fact, there were already signs that JSDelivr would be blocked because it was heavily abused. At the end of last year, JSDelivr‚Äôs ICP filing in China was revoked, and it had some issues for a while but then returned to normal. However, after struggling for about half a year, it was eventually blocked again, which is quite regrettable.</p><h1 id="Fixing-Third-party-Plugin-Issues-in-the-Theme"><a href="#Fixing-Third-party-Plugin-Issues-in-the-Theme" class="headerlink" title="Fixing Third-party Plugin Issues in the Theme"></a>Fixing Third-party Plugin Issues in the Theme</h1><p>There are three possible solutions. The first one is to change the CDN provider, the second is to deploy all third-party plugins to your own website, and the third option is to use your own CDN, which is too complicated to explain here üê∂.</p><h2 id="Changing-the-CDN-Provider"><a href="#Changing-the-CDN-Provider" class="headerlink" title="Changing the CDN Provider"></a>Changing the CDN Provider</h2><p>Next‚Äôs official theme provides three CDN providers: <code>jsdelivr</code>, <code>unpkg</code>, and <code>cdnjs</code>. Based on testing, <code>unpkg</code> and <code>cdnjs</code> are currently still accessible, so you can switch your third-party plugins‚Äô CDN to one of these.</p><ul><li>Open <code>_config.next.yml</code>.</li><li>Locate the ‚ÄòCDN Settings‚Äô section.</li><li>Change <code>plugins: jsdelivr</code> to either <code>plugins: unpkg</code> or <code>plugins: cdnjs</code>.</li></ul><h2 id="Local-Deployment"><a href="#Local-Deployment" class="headerlink" title="Local Deployment"></a>Local Deployment</h2><p>Next‚Äôs official repository also contains third-party plugins used in the theme.</p><div class="note info"><p><a class="btn" target="_blank" rel="noopener" href="https://github.com/next-theme/plugins"><i class="fa fa-torii-gate fa-fw"></i>Next Third-party Plugin Repository</a></p></div><ul><li>First, install the third-party plugin repository. If you encounter any errors, check if the versions of <code>@next-theme/plugins</code> and <code>hexo-theme-next</code> match.<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @next-theme/plugins</span><br></pre></td></tr></table></figure></li><li>Change <code>plugins: jsdelivr</code> to <code>plugins: local</code>.</li></ul><h1 id="Your-Own-Resources"><a href="#Your-Own-Resources" class="headerlink" title="Your Own Resources"></a>Your Own Resources</h1><p>For your own resources, there‚Äôs not much you can do since JSDelivr is the most convenient option, and <code>unpkg</code> and <code>cdnjs</code> don‚Äôt allow you to host your own resources. The only options I can think of are deploying your resources to your website or finding another hosting solution. I‚Äôm left with no choice but to painstakingly move my own resources back to my website üò≠.</p></div><footer class="post-footer"><div><div style="text-align:center;color:#ccc;font-size:14px">---------- This article ends here. <i class="fa fa-dice-d20"></i> Thank you for reading! ----------</div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>Post author: </strong>Sirius</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://siriusq.top/en/hexo-next-jsdelivr-blocked.html" title="Solution for GFW Blocking Next Theme&#39;s JSDelivr">https://siriusq.top/en/hexo-next-jsdelivr-blocked.html</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="post-tags"><a href="/en/tags/Hexo/" rel="tag"><i class="fa fa-tag"></i> Hexo</a> <a href="/en/tags/Next/" rel="tag"><i class="fa fa-tag"></i> Next</a> <a href="/en/tags/JSDelivr/" rel="tag"><i class="fa fa-tag"></i> JSDelivr</a></div><div class="post-nav"><div class="post-nav-item"><a href="/en/next-8-10-update-log.html" rel="prev" title="Blog Upgrade Log for Next Theme Version 8.10"><i class="fa fa-angle-left"></i> Blog Upgrade Log for Next Theme Version 8.10</a></div><div class="post-nav-item"><a href="/en/outlook-export.html" rel="next" title="Export Outlook Emails">Export Outlook Emails <i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments gitalk-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 ‚Äì <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Sirius</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="Word count total">143k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="Reading time total">8:41</span></span></div><div><span id="timeDate">ËΩΩÂÖ•Â§©Êï∞...</span><span id="times">ËΩΩÂÖ•Êó∂ÂàÜÁßí...</span><script>var now=new Date;function createtime(){var n=new Date("03/31/2019 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="This site has been running safely for "+dnum+" days ",document.getElementById("times").innerHTML=hnum+" hrs "+mnum+" mins "+snum+" secs"}setInterval("createtime()",250)</script></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/sidebar.js"></script><script src="/en/js/next-boot.js"></script><script src="/en/js/bookmark.js"></script><script src="/en/js/pjax.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script src="/en/js/third-party/fancybox.js"></script><script src="/en/js/third-party/pace.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://siriusq.top/en/hexo-next-jsdelivr-blocked.html"}</script><script src="/en/js/third-party/quicklink.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous"><script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"Siriusq","repo":"gitalk-commnet","client_id":"4217cae26df745a55acd","client_secret":"b7f2cc0c82be38a4e0f294f12f761bc4799669cd","admin_user":"Siriusq","distraction_free_mode":false,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"1479694dbe2c92a9338e2aa5e7885aac"}</script><script src="/en/js/third-party/comments/gitalk.js"></script><script type="text/javascript" src="/en/js/crash_cheat.js"></script><script async src="/en/js/fireworks.js"></script><script src="https://unpkg.com/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script><script>window.splideStyles={arrowColor:"#fc8d5d",arrowHoverColor:"#fc6423",paginationColor:"#fc8d5d",paginationActiveColor:"#fc6423",paginationHoverColor:"#fc6423",borderRadius:"1px",borderColor:{light:"#eee",dark:"#444"},shadowColor:{light:"rgba(0, 0, 0, 0.1)",dark:"rgba(0, 0, 0, 0.3)"}},window.splideDarkMode="auto",window.mediumZoomEnabled=!1</script><script type="text/javascript">// È°µÈù¢Âä†ËΩΩ‰∫ã‰ª∂ÁõëÂê¨
document.addEventListener('DOMContentLoaded', function () {
    splideLoadingHandler();
    initGlobalMediumZoom();
});

document.addEventListener('pjax:success', function () {
    splideLoadingHandler();
    initGlobalMediumZoom();
});

// PJAXÂºÄÂêØÊó∂ÈîÄÊØÅÊâÄÊúâsplideÂÆû‰æãÔºå‰∏çÁÑ∂ÂºÄÂêØËá™Âä®Êí≠ÊîæÊó∂ÂõæÁâáÁÆÄ‰ªãÂíåÂõæÁâáÂØπ‰∏ç‰∏ä
document.addEventListener('pjax:send', () => {
    destroySplideInstances();
});

window.splideInstances = [];
function destroySplideInstances() {
    window.splideInstances.forEach((instance) => {
        instance.destroy(); // ÈîÄÊØÅÂÆû‰æã
    });
    window.splideInstances = []; // Ê∏ÖÁ©∫Êï∞ÁªÑ
}

// Splid Âä†ËΩΩÂ§ÑÁêÜ
function splideLoadingHandler() {
    // Ê£ÄÊü•È°µÈù¢ÊòØÂê¶Âê´ÊúâËΩÆÊí≠ÂõæÁâá
    const splideEl = document.querySelector('.splide');
    if (!splideEl) {
        return; // Â¶ÇÊûú‰∏çÂ≠òÂú®ËΩÆÊí≠ÔºåÂàô‰∏çÊâßË°åÂàùÂßãÂåñ
    }

    // Ê£ÄÊü•ÊòØÂê¶ÂºÄÂêØNext‰∏ªÈ¢òÁöÑÂä®Áîª
    const isMotionEnabled = typeof CONFIG !== 'undefined' && CONFIG && CONFIG.motion && CONFIG.motion.enable;
    if (isMotionEnabled) {
        // Motion ÂºÄÂêØÊó∂Âª∂ËøüÂä†ËΩΩËΩÆÊí≠ÁªÑ‰ª∂ÔºåÁ≠âÂæÖÂä®ÁîªÂÆåÊàê„ÄÇÊääÁªÑ‰ª∂Âä†ÂÖ•Âä®ÁîªÊúâbugÔºå‰∏ÄÁõ¥Êêû‰∏çÂÆöÔºåÂè™ËÉΩÊõ≤Á∫øÊïëÂõΩ
        setTimeout(function () {
            // ÂàùÂßãÂåñËΩÆÊí≠ÁªÑ‰ª∂
            initSplide();
        }, 500);  // Âª∂Ëøü 500msÔºåÁ°Æ‰øùÂä®ÁîªÂÆåÊàêÂêéÂÜçÂàùÂßãÂåñ
    } else {
        // Motion ÂÖ≥Èó≠Êó∂Á´ãÂç≥ÂàùÂßãÂåñ
        initSplide();
    }

    // Â§ÑÁêÜ fancyboxÔºåÈªòËÆ§ËÆæÁΩÆ‰ºöÂàáÊç¢ÁÑ¶ÁÇπÂõæÁâáÈÄ†ÊàêËΩÆÊí≠ÁªÑ‰ª∂Ê∑∑‰π±
    if (typeof Fancybox !== "undefined") {
        adjustFancybox();
    }

    // ÂàùÂßãÂåñËΩÆÊí≠ÁªÑ‰ª∂‰∏≠ÁöÑ Medium Zoom
    if (mediumZoomEnabled) {
        initCarouselMediumZoom();
    }

    // Â∫îÁî®‰∏ªÈ¢òÊ†∑Âºè
    applySplideStyle();
}

// ÂàùÂßãÂåñ Splide
function initSplide() {
    const splideElements = document.querySelectorAll('.splide');
    splideElements.forEach(splideEl => {
        const options = JSON.parse(splideEl.getAttribute('data-splide'));
        // Â¶ÇÊûúËΩÆÊí≠ÁªÑ‰ª∂‰∏≠Âè™Êúâ‰∏ÄÂº†ÂõæÁâáÔºåÂàôÈöêËóèÁÆ≠Â§¥
        const slideCount = splideEl.querySelectorAll('.splide__slide').length;
        if (slideCount <= 1) {
            options.arrows = false;
        }
        // ÁÆÄ‰ªãËÆæÁΩÆ
        const splide = new Splide(splideEl, options);
        splide.on('mounted move', function () {
            const activeSlide = splide.Components.Slides.getAt(splide.index);
            const caption = activeSlide.slide.dataset.caption;
            const captionId = splideEl.getAttribute('data-caption-id');

            const captionElement = document.getElementById(captionId);
            if (captionElement) {
                captionElement.innerText = caption || '';  // Â¶ÇÊûúÊ≤°ÊúâÁÆÄ‰ªãÔºåËÆæÁΩÆ‰∏∫Á©∫Â≠óÁ¨¶‰∏≤
            }
        });
        splide.mount();
        window.splideInstances.push(splide); // Â∞ÜÂÆû‰æãÂ≠òÂÇ®Âà∞Êï∞ÁªÑ‰∏≠   
    });
}

// Â∫îÁî®‰∏ªÈ¢òÊòéÊöóÊ†∑Âºè
function applySplideStyle() {
    const applyThemeStyles = (theme, splideStyles) => {
        const borderColor = theme === 'dark' ? splideStyles.borderColor.dark : splideStyles.borderColor.light;
        const shadowColor = theme === 'dark' ? splideStyles.shadowColor.dark : splideStyles.shadowColor.light;
        document.documentElement.style.setProperty('--carousel-border-color', borderColor);
        document.documentElement.style.setProperty('--carousel-shadow-color', shadowColor);
        document.documentElement.style.setProperty('--carousel-border-radius', splideStyles.borderRadius);
        document.documentElement.style.setProperty('--carousel-arrow-color', splideStyles.arrowColor);
        document.documentElement.style.setProperty('--carousel-arrow-hover-color', splideStyles.arrowHoverColor);
        document.documentElement.style.setProperty('--carousel-pagination-color', splideStyles.paginationColor);
        document.documentElement.style.setProperty('--carousel-pagination-active-color', splideStyles.paginationActiveColor);
        document.documentElement.style.setProperty('--carousel-pagination-hover-color', splideStyles.paginationHoverColor);
    };

    let theme = 'light';
    if (window.splideDarkMode === 'auto') {
        theme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    } else if (window.splideDarkMode === 'true') {
        theme = 'dark';
    }
    applyThemeStyles(theme, window.splideStyles);

    if (window.splideDarkMode === 'auto') {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            applyThemeStyles(e.matches ? 'dark' : 'light', window.splideStyles);
        });
    }
}

// ÂàùÂßãÂåñÈùûËΩÆÊí≠ÂõæÁâáÁöÑ Medium Zoom
function initGlobalMediumZoom() {
    // Ê£ÄÊü•ÊòØÂê¶ÂêØÁî® medium-zoom
    if (!mediumZoomEnabled) {
        return;
    }
    const zoomOutsideCarousel = mediumZoom('img:not(.splide .zoomable)', {
        background: 'rgba(0, 0, 0, 0.8)',
        margin: 24
    });
}

// ÂàùÂßãÂåñËΩÆÊí≠ÁªÑ‰ª∂‰∏≠ÁöÑ Medium Zoom
function initCarouselMediumZoom() {
    const zoomCarousel = mediumZoom('.zoomable', {
        background: 'rgba(0, 0, 0, 0.8)',
        margin: 24,
        onOpen: (zoom) => {
            const img = zoom.target; // Ëé∑ÂèñÊ≠£Âú®Áº©ÊîæÁöÑÂõæÁâá
            img.classList.add('zooming'); // Ê∑ªÂä†‰∏Ä‰∏™Áº©ÊîæÊó∂ÁöÑ class
        },
        onClose: (zoom) => {
            const img = zoom.target; // Ëé∑ÂèñÁº©ÊîæÁöÑÂõæÁâá
            img.classList.remove('zooming'); // ÁßªÈô§Áº©ÊîæÊó∂ÁöÑ class
        }
    });

    zoomCarousel.on('open', () => {
        // ÈöêËóèÁÆ≠Â§¥ÂíåÂàÜÈ°µÊåâÈíÆ
        document.querySelectorAll('.splide__arrow, .splide__pagination').forEach(el => {
            el.style.display = 'none';
        });
    });

    zoomCarousel.on('close', () => {
        // ÈáçÊñ∞ÊòæÁ§∫ÁÆ≠Â§¥ÂíåÂàÜÈ°µÊåâÈíÆ
        document.querySelectorAll('.splide__arrow, .splide__pagination').forEach(el => {
            el.style.display = '';
        });
    });
}

// fancybox ÂÖºÂÆπË∞ÉÊï¥
function adjustFancybox() {
    Fancybox.bind("[data-fancybox]", {
        placeFocusBack: false,  // Á¶ÅÊ≠¢ Fancybox ÂÖ≥Èó≠Êó∂ÊªöÂä®ÂõûÈ°µÈù¢ÁöÑÁÑ¶ÁÇπ‰ΩçÁΩÆ
    });

    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.type === "childList") {
                removeFancyboxFromClones();
            }
        });
    });

    // ËßÇÂØüÊï¥‰∏™ÊñáÊ°£ÁöÑ DOM ÂèòÂåñ
    observer.observe(document, { childList: true, subtree: true });
}

// ÁßªÈô§ÂÖãÈöÜ Slide ‰∏≠ÁöÑ Fancybox ÈìæÊé•
function removeFancyboxFromClones() {
    const cloneSlides = document.querySelectorAll('.splide__slide--clone');

    cloneSlides.forEach((slide) => {
        const fancyboxLink = slide.querySelector('a.fancybox');
        if (fancyboxLink) {
            const img = fancyboxLink.querySelector('img');
            if (img) {
                // Â∞Ü img Êå™Âá∫ a Ê†áÁ≠æ
                fancyboxLink.replaceWith(img);
            }
        }
    });
}</script></body></html>