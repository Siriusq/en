<!DOCTYPE html><html lang="en"><head><link href="https://unpkg.com/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet"><style type="text/css">.splide{border:2px solid var(--carousel-border-color);box-shadow:0 4px 8px var(--carousel-shadow-color);border-radius:var(--carousel-border-radius)}.splide__slide img{width:100%;height:100%;object-fit:contain}.carousel-container{visibility:inherit;margin-top:20px;margin-bottom:20px}.carousel-caption{min-height:2em;line-height:2em;text-align:center;font-size:.9em;font-style:italic;padding:6px;margin-left:auto;margin-right:auto}.splide__arrow{background:0 0;align-items:center;border:0;cursor:pointer;display:flex;height:5em;justify-content:center;position:absolute;top:50%;transform:translateY(-50%);width:5em;z-index:10}.splide__arrow:disabled{opacity:0}.splide__arrow--prev{left:0}.splide__arrow--next{right:0}.splide__arrow svg{fill:var(--carousel-arrow-color);height:2.5em;transition:fill .2s linear;width:2.5em}.splide__arrow:hover:not(:disabled) svg{fill:var(--carousel-arrow-hover-color)}.splide__arrow:focus-visible{outline:transparent;outline-offset:0}.splide.is-focus-in .splide__arrow:focus{outline:transparent;outline-offset:0}.splide__pagination__page:focus-visible{outline:transparent;outline-offset:0}.splide.is-focus-in .splide__pagination__page:focus{outline:transparent;outline-offset:0}.splide__pagination{bottom:1em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:var(--carousel-pagination-color);border:0;border-radius:2.5px;display:inline-block;height:5px;margin:3px;width:20px;transition:background-color .2s linear}.splide__pagination__page.is-active{background:var(--carousel-pagination-active-color)}.splide__pagination__page:hover{background:var(--carousel-pagination-hover-color);cursor:pointer;opacity:.9}.splide__pagination__page::before{content:'';position:absolute;top:-18px;bottom:-18px;left:-4px;right:-4px}.splide__pagination__page.is-active::before{content:'';position:absolute;top:-12px;bottom:-12px;left:-1px;right:-1px}.zoomable{object-fit:contain}.zooming{max-width:90vw!important;max-height:90vh!important;object-fit:contain!important}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><link rel="manifest" href="/en/images/site.webmanifest"><meta name="msvalidate.01" content="BE3DB9F22A0915AF3452024048D66934"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300italic,400,400italic,700,700italic%7CNoto+Serif:300,300italic,400,400italic,700,700italic%7CFira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-flash.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"siriusq.top","root":"/en/","images":"/en/images","scheme":"Gemini","darkmode":"auto","version":"8.20.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":320,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><meta name="description" content="Documenting the process of setting up WSA, establishing an internet connection, configuring a proxy, and installing applications."><meta property="og:type" content="article"><meta property="og:title" content="Installation and Configuration of WSA"><meta property="og:url" content="https://siriusq.top/en/wsa.html"><meta property="og:site_name" content="Sirius"><meta property="og:description" content="Documenting the process of setting up WSA, establishing an internet connection, configuring a proxy, and installing applications."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://s2.loli.net/2022/06/02/cdf8ypRustXqS3v.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/P45KeiDczAdgbXh.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/NatckrIXWZC5Oxh.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/6SdWlJb9LfIa4cV.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/uZAeSJEXPFKyGx3.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/MGDFkbQCelVUPgu.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/HJIWBZVYlC3pT7s.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/CmPInWYB536VjwS.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/Vh3JBqGuFPoNMd9.png"><meta property="article:published_time" content="2022-06-02T08:04:48.000Z"><meta property="article:modified_time" content="2024-09-12T15:09:32.674Z"><meta property="article:author" content="Sirius"><meta property="article:tag" content="Windows"><meta property="article:tag" content="WSA"><meta property="article:tag" content="Android"><meta property="article:tag" content="V2ray"><meta property="article:tag" content="Google Play"><meta property="article:tag" content="Magisk"><meta property="article:tag" content="adb"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/06/02/cdf8ypRustXqS3v.png"><link rel="canonical" href="https://siriusq.top/en/wsa.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://siriusq.top/en/wsa.html","path":"wsa.html","title":"Installation and Configuration of WSA"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Installation and Configuration of WSA | Sirius</title><script src="/en/live2d-widget/autoload.js"></script><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Sirius" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Sirius</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">May the Force be with you</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/en/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/en/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">102</span></a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">67</span></a></li><li class="menu-item menu-item-tools"><a href="/en/tools/" rel="section"><i class="fa fa-screwdriver-wrench fa-fw"></i>Tools</a></li><li class="menu-item menu-item-switch-to-chinese"><a href="https://siriusq.top/" rel="section"><i class="fa fa-language fa-fw"></i>Switch to Chinese</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Reminder-of-Timeliness"><span class="nav-number">1.</span> <span class="nav-text">Reminder of Timeliness</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Preparation"><span class="nav-number">2.</span> <span class="nav-text">Preparation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Windows-Settings-Adjustment"><span class="nav-number">2.1.</span> <span class="nav-text">Windows Settings Adjustment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-adb"><span class="nav-number">2.2.</span> <span class="nav-text">Install adb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-WSA-Toolbox"><span class="nav-number">2.3.</span> <span class="nav-text">Install WSA Toolbox</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Install-WSA"><span class="nav-number">3.</span> <span class="nav-text">Install WSA</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Connectivity-Issues"><span class="nav-number">4.</span> <span class="nav-text">Connectivity Issues</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Change-Firewall-Rules"><span class="nav-number">4.1.</span> <span class="nav-text">Change Firewall Rules</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Change-DNS"><span class="nav-number">4.2.</span> <span class="nav-text">Change DNS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#adb-Modify-captive-portal"><span class="nav-number">4.3.</span> <span class="nav-text">adb Modify captive_portal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#USB-Tethering"><span class="nav-number">4.4.</span> <span class="nav-text">USB Tethering</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Enable-Hyper-V-Feature"><span class="nav-number">4.5.</span> <span class="nav-text">Enable Hyper-V Feature</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Setting-up-Proxy"><span class="nav-number">5.</span> <span class="nav-text">Setting up Proxy</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Standard-Procedure"><span class="nav-number">5.1.</span> <span class="nav-text">Standard Procedure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Alternative-Solution"><span class="nav-number">5.2.</span> <span class="nav-text">Alternative Solution</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Sideloading-APKs"><span class="nav-number">6.</span> <span class="nav-text">Sideloading APKs</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Sirius" src="https://s2.loli.net/2022/05/23/kxtRKT4u71HXlUY.gif"><p class="site-author-name" itemprop="name">Sirius</p><div class="site-description" itemprop="description">Thread_sleep(1); //be nice to the CPU</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/en/archives/"><span class="site-state-item-count">67</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/en/categories/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/en/tags/"><span class="site-state-item-count">102</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Siriusq" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;Siriusq" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="/en/atom.xml" title="RSS Feed ‚Üí &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i>RSS Feed</a> </span><span class="links-of-author-item"><a href="mailto:siriusq.top@outlook.com" title="E-Mail ‚Üí mailto:siriusq.top@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://leetcode.com/Siriusq/" title="LeetCode ‚Üí https:&#x2F;&#x2F;leetcode.com&#x2F;Siriusq&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-code fa-fw"></i>LeetCode</a></span></div><script src="/en/js/switch_limited.js"></script></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://siriusq.top/en/wsa.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://s2.loli.net/2022/05/23/kxtRKT4u71HXlUY.gif"><meta itemprop="name" content="Sirius"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sirius"><meta itemprop="description" content="Thread_sleep(1); //be nice to the CPU"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Installation and Configuration of WSA | Sirius"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Installation and Configuration of WSA</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-06-02 16:04:48" itemprop="dateCreated datePublished" datetime="2022-06-02T16:04:48+08:00">2022-06-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-09-12 23:09:32" itemprop="dateModified" datetime="2024-09-12T23:09:32+08:00">2024-09-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Virtual-Machine/" itemprop="url" rel="index"><span itemprop="name">Virtual Machine</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="Word count in article"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">Word count in article: </span><span>1.3k</span> </span><span class="post-meta-item" title="Reading time"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">Reading time &asymp;</span> <span>5 mins.</span></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote class="blockquote-center">Documenting the process of setting up WSA, establishing an internet connection, configuring a proxy, and installing applications.</blockquote><span id="more"></span><div class="note danger"><h1 id="Reminder-of-Timeliness"><a href="#Reminder-of-Timeliness" class="headerlink" title="Reminder of Timeliness"></a>Reminder of Timeliness</h1><p>This article was written in June 2022! Please be aware that some of the content may have become outdated!</p></div><div class="note warning"><p>This post was translated from my Chinese blog post with the aid of ChatGpt.</p></div><h1 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h1><div class="note warning"><p>Remember to enable CPU virtualization in BIOS.</p></div><h2 id="Windows-Settings-Adjustment"><a href="#Windows-Settings-Adjustment" class="headerlink" title="Windows Settings Adjustment"></a>Windows Settings Adjustment</h2><p>Open <code>Settings</code> - <code>Apps</code> - <code>Optional Features</code> - <code>More Windows Features</code> and check <code>Virtual Machine Platform</code>, then wait for installation and restart.<br><img data-src="https://s2.loli.net/2022/06/02/cdf8ypRustXqS3v.png" alt="wsa2.png"></p><p>Next, go to <code>Settings</code> - <code>Privacy &amp; Security</code> - <code>Developer options</code> - <code>Developer mode</code> and turn on the switch.<br><img data-src="https://s2.loli.net/2022/06/02/P45KeiDczAdgbXh.png" alt="wsa3.png"></p><h2 id="Install-adb"><a href="#Install-adb" class="headerlink" title="Install adb"></a>Install adb</h2><div class="link-grid"><div class="link-grid-container"><object class="link-grid-image" data="/images/link/download.webp"></object><p>Download adb</p><p>Download SDK Platform-Tools for Windows</p><a target="_blank" rel="noopener" href="https://developer.android.com/studio/releases/platform-tools"></a></div></div><ol><li>After downloading, place the installation package in a fixed location and then unzip it because you‚Äôll need to set environment variables below.</li><li>Press <code>Win</code> + <code>S</code>, search for and open <code>Edit the system environment variables</code>.</li><li>In the System variables section, create a variable named <code>adb</code> with the value being the path to the folder you just unzipped, e.g., <code>D:\Program Files\platform-tools</code>.</li><li>Double-click the variable named <code>Path</code> in the System variables section, then add <code>%adb%</code> as a new variable.</li><li>Confirm with OK.</li><li>In the terminal, type <code>adb version</code> to check if it‚Äôs set up correctly.</li></ol><p><img data-src="https://s2.loli.net/2022/06/02/NatckrIXWZC5Oxh.png" alt="wsa4.png"></p><h2 id="Install-WSA-Toolbox"><a href="#Install-WSA-Toolbox" class="headerlink" title="Install WSA Toolbox"></a>Install WSA Toolbox</h2><div class="link-grid"><div class="link-grid-container"><object class="link-grid-image" data="/images/link/download.webp"></object><p>WSA Toolbox</p><p>Provides utilities & tools for WSA</p><a target="_blank" rel="noopener" href="https://apps.microsoft.com/store/detail/wsa-toolbox/9PPSP2MKVTGT?hl=en-us&gl=US"></a></div></div><p>This tool has been removed from the Microsoft Store in the Chinese region, so you can only install it through the link above. You‚Äôll need it later to access the Android system settings for WSA.</p><hr><h1 id="Install-WSA"><a href="#Install-WSA" class="headerlink" title="Install WSA"></a>Install WSA</h1><p>Here, I‚Äôm using an integrated package that includes root, Magisk, and Google Play, which simplifies the process.</p><div class="link-grid"><div class="link-grid-container"><object class="link-grid-image" data="/images/link/github.webp"></object><p>Magisk</p><p>LSPosed Magisk on WSA (with Google Apps)</p><a target="_blank" rel="noopener" href="https://github.com/LSPosed/MagiskOnWSA"></a></div></div><ol><li>First, fork the code to your own repository, then in the forked repository, click on <code>Actions</code> in the upper left corner.</li><li>In the <code>Workflow</code> section, click on <code>Build WSA</code>.</li><li>Click on <code>Run workflow</code> on the right, and in the dropdown menu, select <code>Build arch</code> as <code>x64</code>, and choose <code>Variants of gapps</code> as <code>pico</code>.</li><li>Finally, click the green <code>Run workflow</code> button, and wait for the build process to complete, which usually takes about five to six minutes.<br><img data-src="https://s2.loli.net/2022/06/02/6SdWlJb9LfIa4cV.png" alt="wsa1.png"></li><li>Download the completed build, and be sure not to use a multi-threaded downloader.</li><li>Unzip the file.</li><li>Right-click on <code>Install.ps1</code>, select <code>Run with PowerShell</code>, and wait for the installation to complete. After installation, the Play Store will open.</li><li>Open <code>Android-based Windows Subsystem for Android Settings</code>, enable <code>Developer mode</code>, and take note of the displayed IP address, which is usually <code>127.0.0.1:58526</code>.<br><img data-src="https://s2.loli.net/2022/06/02/uZAeSJEXPFKyGx3.png" alt="wsa9.png"></li></ol><hr><h1 id="Connectivity-Issues"><a href="#Connectivity-Issues" class="headerlink" title="Connectivity Issues"></a>Connectivity Issues</h1><p>In China, the Play Store cannot be accessed without a proxy. However, you can use the Amazon Appstore to check if you have a network connection. If everything is normal, please skip this section. This section is specifically for users who, like me, encountered connectivity issues.</p><p>After installing WSA, if you can‚Äôt connect to the internet and you keep seeing ‚ÄúVritWifi connection is limited,‚Äù you can try the following methods, as summarized by Google:</p><h2 id="Change-Firewall-Rules"><a href="#Change-Firewall-Rules" class="headerlink" title="Change Firewall Rules"></a>Change Firewall Rules</h2><p>Run the terminal as an administrator and execute the following command to add a firewall rule:</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">New-NetFirewallRule</span> <span class="literal">-DisplayName</span> <span class="string">&quot;WSL&quot;</span> <span class="literal">-Direction</span> Inbound <span class="literal">-InterfaceAlias</span> <span class="string">&quot;vEthernet (WSL)&quot;</span> <span class="literal">-Action</span> Allow</span><br></pre></td></tr></table></figure><p>However, this did not work for me.</p><h2 id="Change-DNS"><a href="#Change-DNS" class="headerlink" title="Change DNS"></a>Change DNS</h2><p>Change the default DNS settings of WSA, but this may not work for everyone.</p><ol><li>Open the previously installed <code>WSA Toolbox</code> and click on <code>Android Settings</code> in the middle.</li><li>Go to <code>Network &amp; Internet</code> &gt; <code>Internet</code> &gt; <code>Wi-Fi</code> &gt; <code>VritWifi</code>.</li><li>Click on the settings icon in the upper right.</li><li>Change <code>DNS 1</code> to <code>8.8.4.4</code> or <code>114.114.115.115</code>, which are commonly used DNS servers.</li></ol><p><img data-src="https://s2.loli.net/2022/06/02/MGDFkbQCelVUPgu.png" alt="wsa5.png"></p><h2 id="adb-Modify-captive-portal"><a href="#adb-Modify-captive-portal" class="headerlink" title="adb Modify captive_portal"></a>adb Modify captive_portal</h2><p>It turns out that this is a misleading solution. Open the terminal and execute the following commands:</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb connect <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">58526</span></span><br><span class="line">adb shell settings put global captive_portal_https_url https://connect.rom.miui.com/generate_204</span><br><span class="line">adb shell settings put global captive_portal_http_url http://connect.rom.miui.com/generate_204</span><br></pre></td></tr></table></figure><p>The only effect of this operation is to remove the annoying prompt when you are already connected to the internet but still receive a ‚Äúlimited network‚Äù warning.</p><blockquote><p>A captive portal is a web page presented to newly connected users before they are granted broader access to the network (Internet). It is commonly used to present a landing or login page that may require authentication or acceptance of usage policies. Captive portals are used in a variety of mobile broadband services (wired and wireless), and can also be used for access to enterprise or residential wired networks (such as apartment buildings, hotels, and business centers).</p></blockquote><p>By default, WSA uses Google‚Äôs Captive Portal to check for internet connectivity, which doesn‚Äôt work in China. Therefore, it displays the ‚Äúlimited network‚Äù message. By changing the detection server to one based in China, you can resolve this issue. Here are some alternative servers you can use:</p><ul><li>Apple: <a target="_blank" rel="noopener" href="http://www.apple.com/library/test/success.html">http://www.apple.com/library/test/success.html</a></li><li>Huawei: <a target="_blank" rel="noopener" href="http://connectivitycheck.platform.hicloud.com/generate_204">http://connectivitycheck.platform.hicloud.com/generate_204</a></li><li>Vivo: <a target="_blank" rel="noopener" href="http://wifi.vivo.com.cn/generate_204">http://wifi.vivo.com.cn/generate_204</a></li></ul><h2 id="USB-Tethering"><a href="#USB-Tethering" class="headerlink" title="USB Tethering"></a>USB Tethering</h2><p>This method is a workaround and may need to be reconfigured after a reboot.</p><ol><li>Open the previously installed <code>WSA Toolbox</code> and click on <code>Android Settings</code> in the middle.</li><li>Go to <code>System</code> &gt; <code>Developer options</code>.</li><li>Enable the <code>Developer options</code> toggle.</li><li>Scroll down to <code>Network</code> &gt; <code>Default USB configuration</code>.</li><li>Set it to <code>USB tethering</code>.</li></ol><h2 id="Enable-Hyper-V-Feature"><a href="#Enable-Hyper-V-Feature" class="headerlink" title="Enable Hyper-V Feature"></a>Enable Hyper-V Feature</h2><div class="note primary"><p>I found a <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/431557897">post</a> on Zhihu by Hilton, which suggested enabling the Hyper-V feature. Surprisingly, it worked, even though the official documentation says it‚Äôs not required.</p></div><ol><li>Open <code>Settings</code> &gt; <code>Apps</code> &gt; <code>Optional Features</code> &gt; <code>More Windows features</code>.</li><li>Expand <code>Hyper-V</code>.</li><li>Check <code>Hyper-V Platform</code>.</li><li>Wait for the installation to complete.</li></ol><p><img data-src="https://s2.loli.net/2022/06/02/HJIWBZVYlC3pT7s.png" alt="wsa6.png"></p><p>After doing this, magically, you can connect to the internet. I still don‚Äôt fully understand why this works. ü§Ø</p><hr><h1 id="Setting-up-Proxy"><a href="#Setting-up-Proxy" class="headerlink" title="Setting up Proxy"></a>Setting up Proxy</h1><h2 id="Standard-Procedure"><a href="#Standard-Procedure" class="headerlink" title="Standard Procedure"></a>Standard Procedure</h2><p>I‚Äôm using the V2rayN client. If you‚Äôre using Clash, there are plenty of tutorials available.</p><ol><li>Open V2rayN, go to <code>Settings</code> &gt; <code>Parameter Settings</code> &gt; <code>Basic Settings</code>, and check the box that says <code>Allow connections from the local network</code>.</li><li>Take note of the local HTTP port displayed at the bottom, which is usually <code>10811</code>.<br><img data-src="https://s2.loli.net/2022/06/02/CmPInWYB536VjwS.png" alt="wsa7.png"></li><li>In the terminal, run the following command, but make sure to replace <code>127.0.0.1:58526</code> with the IP you noted from the <code>Windows Subsystem for Android</code> settings, which is typically this IP.<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">58526</span></span><br></pre></td></tr></table></figure></li><li>In the terminal, enter:<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig</span><br></pre></td></tr></table></figure></li><li>Find the IP address of the network card you‚Äôre currently using. In my case, it‚Äôs <code>192.168.50.70</code>.<br><img data-src="https://s2.loli.net/2022/06/02/Vh3JBqGuFPoNMd9.png" alt="wsa8.png"></li><li>Run the following command in the terminal, but replace the IP with your network card‚Äôs IP:<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global http_proxy <span class="number">192.168</span>.<span class="number">50.70</span>:<span class="number">10811</span></span><br></pre></td></tr></table></figure></li></ol><p>If you want to disable the proxy, you can use the following commands:</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global http_proxy :<span class="number">0</span></span><br><span class="line">adb shell settings delete global http_proxy</span><br></pre></td></tr></table></figure><h2 id="Alternative-Solution"><a href="#Alternative-Solution" class="headerlink" title="Alternative Solution"></a>Alternative Solution</h2><p>If the above methods don‚Äôt work, you can install a proxy configuration app, such as V2rayNG, directly in WSA.</p><div class="link-grid"><div class="link-grid-container"><object class="link-grid-image" data="/images/link/github.webp"></object><p>V2rayNG</p><p>A V2Ray client for Android</p><a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayNG/releases"></a></div></div><h1 id="Sideloading-APKs"><a href="#Sideloading-APKs" class="headerlink" title="Sideloading APKs"></a>Sideloading APKs</h1><p>If you don‚Äôt have access to a proxy, you won‚Äôt be able to install apps through the Play Store. However, you can sideload apps using the following method:</p><ol><li>In the terminal, run the following command, but make sure to replace <code>127.0.0.1:58526</code> with the IP you noted from the <code>Windows Subsystem for Android</code> settings, which is typically this IP.<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">58526</span></span><br></pre></td></tr></table></figure></li><li>Navigate to the folder where the APK is located.</li><li>Execute the following command:<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install apk_name</span><br></pre></td></tr></table></figure></li></ol><p>I use Coolapk as an alternative app store in China.</p><div class="link-grid"><div class="link-grid-container"><object class="link-grid-image" data="/images/link/link.webp"></object><p>Coolapk APP</p><p>Discover the new life of technology</p><a target="_blank" rel="noopener" href="https://www.coolapk.com/"></a></div></div></div><footer class="post-footer"><div><div style="text-align:center;color:#ccc;font-size:14px">---------- This article ends here. <i class="fa fa-dice-d20"></i> Thank you for reading! ----------</div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>Post author: </strong>Sirius</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://siriusq.top/en/wsa.html" title="Installation and Configuration of WSA">https://siriusq.top/en/wsa.html</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="post-tags"><a href="/en/tags/Windows/" rel="tag"><i class="fa fa-tag"></i> Windows</a> <a href="/en/tags/WSA/" rel="tag"><i class="fa fa-tag"></i> WSA</a> <a href="/en/tags/Android/" rel="tag"><i class="fa fa-tag"></i> Android</a> <a href="/en/tags/V2ray/" rel="tag"><i class="fa fa-tag"></i> V2ray</a> <a href="/en/tags/Google-Play/" rel="tag"><i class="fa fa-tag"></i> Google Play</a> <a href="/en/tags/Magisk/" rel="tag"><i class="fa fa-tag"></i> Magisk</a> <a href="/en/tags/adb/" rel="tag"><i class="fa fa-tag"></i> adb</a></div><div class="post-nav"><div class="post-nav-item"><a href="/en/windows-terminal.html" rel="prev" title="Customizing Windows Terminal"><i class="fa fa-angle-left"></i> Customizing Windows Terminal</a></div><div class="post-nav-item"><a href="/en/transfer-domain.html" rel="next" title="Transferring Domain Names From Alibaba Cloud to Namesilo">Transferring Domain Names From Alibaba Cloud to Namesilo <i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="comments gitalk-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 ‚Äì <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Sirius</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="Word count total">131k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="Reading time total">7:56</span></span></div><div><span id="timeDate">ËΩΩÂÖ•Â§©Êï∞...</span><span id="times">ËΩΩÂÖ•Êó∂ÂàÜÁßí...</span><script>var now=new Date;function createtime(){var n=new Date("03/31/2019 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="This site has been running safely for "+dnum+" days ",document.getElementById("times").innerHTML=hnum+" hrs "+mnum+" mins "+snum+" secs"}setInterval("createtime()",250)</script></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/sidebar.js"></script><script src="/en/js/next-boot.js"></script><script src="/en/js/bookmark.js"></script><script src="/en/js/pjax.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script src="/en/js/third-party/fancybox.js"></script><script src="/en/js/third-party/pace.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://siriusq.top/en/wsa.html"}</script><script src="/en/js/third-party/quicklink.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous"><script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"Siriusq","repo":"gitalk-commnet","client_id":"4217cae26df745a55acd","client_secret":"b7f2cc0c82be38a4e0f294f12f761bc4799669cd","admin_user":"Siriusq","distraction_free_mode":false,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"1aa324506fdb7099fad9dc24dcd304f7"}</script><script src="/en/js/third-party/comments/gitalk.js"></script><script type="text/javascript" src="/en/js/crash_cheat.js"></script><script async src="/en/js/fireworks.js"></script><script src="https://unpkg.com/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script><script>window.splideStyles={arrowColor:"#fc8d5d",arrowHoverColor:"#fc6423",paginationColor:"#fc8d5d",paginationActiveColor:"#fc6423",paginationHoverColor:"#fc6423",borderRadius:"1px",borderColor:{light:"#eee",dark:"#444"},shadowColor:{light:"rgba(0, 0, 0, 0.1)",dark:"rgba(0, 0, 0, 0.3)"}},window.splideDarkMode="auto",window.mediumZoomEnabled=!1</script><script type="text/javascript">// È°µÈù¢Âä†ËΩΩ‰∫ã‰ª∂ÁõëÂê¨
document.addEventListener('DOMContentLoaded', function () {
    splideLoadingHandler();
    initGlobalMediumZoom();
});

document.addEventListener('pjax:success', function () {
    splideLoadingHandler();
    initGlobalMediumZoom();
});

// PJAXÂºÄÂêØÊó∂ÈîÄÊØÅÊâÄÊúâsplideÂÆû‰æãÔºå‰∏çÁÑ∂ÂºÄÂêØËá™Âä®Êí≠ÊîæÊó∂ÂõæÁâáÁÆÄ‰ªãÂíåÂõæÁâáÂØπ‰∏ç‰∏ä
document.addEventListener('pjax:send', () => {
    destroySplideInstances();
});

window.splideInstances = [];
function destroySplideInstances() {
    window.splideInstances.forEach((instance) => {
        instance.destroy(); // ÈîÄÊØÅÂÆû‰æã
    });
    window.splideInstances = []; // Ê∏ÖÁ©∫Êï∞ÁªÑ
}

// Splid Âä†ËΩΩÂ§ÑÁêÜ
function splideLoadingHandler() {
    // Ê£ÄÊü•È°µÈù¢ÊòØÂê¶Âê´ÊúâËΩÆÊí≠ÂõæÁâá
    const splideEl = document.querySelector('.splide');
    if (!splideEl) {
        return; // Â¶ÇÊûú‰∏çÂ≠òÂú®ËΩÆÊí≠ÔºåÂàô‰∏çÊâßË°åÂàùÂßãÂåñ
    }

    // Ê£ÄÊü•ÊòØÂê¶ÂºÄÂêØNext‰∏ªÈ¢òÁöÑÂä®Áîª
    const isMotionEnabled = typeof CONFIG !== 'undefined' && CONFIG && CONFIG.motion && CONFIG.motion.enable;
    if (isMotionEnabled) {
        // Motion ÂºÄÂêØÊó∂Âª∂ËøüÂä†ËΩΩËΩÆÊí≠ÁªÑ‰ª∂ÔºåÁ≠âÂæÖÂä®ÁîªÂÆåÊàê„ÄÇÊääÁªÑ‰ª∂Âä†ÂÖ•Âä®ÁîªÊúâbugÔºå‰∏ÄÁõ¥Êêû‰∏çÂÆöÔºåÂè™ËÉΩÊõ≤Á∫øÊïëÂõΩ
        setTimeout(function () {
            // ÂàùÂßãÂåñËΩÆÊí≠ÁªÑ‰ª∂
            initSplide();
        }, 500);  // Âª∂Ëøü 500msÔºåÁ°Æ‰øùÂä®ÁîªÂÆåÊàêÂêéÂÜçÂàùÂßãÂåñ
    } else {
        // Motion ÂÖ≥Èó≠Êó∂Á´ãÂç≥ÂàùÂßãÂåñ
        initSplide();
    }

    // Â§ÑÁêÜ fancyboxÔºåÈªòËÆ§ËÆæÁΩÆ‰ºöÂàáÊç¢ÁÑ¶ÁÇπÂõæÁâáÈÄ†ÊàêËΩÆÊí≠ÁªÑ‰ª∂Ê∑∑‰π±
    if (typeof Fancybox !== "undefined") {
        adjustFancybox();
    }

    // ÂàùÂßãÂåñËΩÆÊí≠ÁªÑ‰ª∂‰∏≠ÁöÑ Medium Zoom
    if (mediumZoomEnabled) {
        initCarouselMediumZoom();
    }

    // Â∫îÁî®‰∏ªÈ¢òÊ†∑Âºè
    applySplideStyle();
}

// ÂàùÂßãÂåñ Splide
function initSplide() {
    const splideElements = document.querySelectorAll('.splide');
    splideElements.forEach(splideEl => {
        const options = JSON.parse(splideEl.getAttribute('data-splide'));
        // Â¶ÇÊûúËΩÆÊí≠ÁªÑ‰ª∂‰∏≠Âè™Êúâ‰∏ÄÂº†ÂõæÁâáÔºåÂàôÈöêËóèÁÆ≠Â§¥
        const slideCount = splideEl.querySelectorAll('.splide__slide').length;
        if (slideCount <= 1) {
            options.arrows = false;
        }
        // ÁÆÄ‰ªãËÆæÁΩÆ
        const splide = new Splide(splideEl, options);
        splide.on('mounted move', function () {
            const activeSlide = splide.Components.Slides.getAt(splide.index);
            const caption = activeSlide.slide.dataset.caption;
            const captionId = splideEl.getAttribute('data-caption-id');

            const captionElement = document.getElementById(captionId);
            if (captionElement) {
                captionElement.innerText = caption || '';  // Â¶ÇÊûúÊ≤°ÊúâÁÆÄ‰ªãÔºåËÆæÁΩÆ‰∏∫Á©∫Â≠óÁ¨¶‰∏≤
            }
        });
        splide.mount();
        window.splideInstances.push(splide); // Â∞ÜÂÆû‰æãÂ≠òÂÇ®Âà∞Êï∞ÁªÑ‰∏≠   
    });
}

// Â∫îÁî®‰∏ªÈ¢òÊòéÊöóÊ†∑Âºè
function applySplideStyle() {
    const applyThemeStyles = (theme, splideStyles) => {
        const borderColor = theme === 'dark' ? splideStyles.borderColor.dark : splideStyles.borderColor.light;
        const shadowColor = theme === 'dark' ? splideStyles.shadowColor.dark : splideStyles.shadowColor.light;
        document.documentElement.style.setProperty('--carousel-border-color', borderColor);
        document.documentElement.style.setProperty('--carousel-shadow-color', shadowColor);
        document.documentElement.style.setProperty('--carousel-border-radius', splideStyles.borderRadius);
        document.documentElement.style.setProperty('--carousel-arrow-color', splideStyles.arrowColor);
        document.documentElement.style.setProperty('--carousel-arrow-hover-color', splideStyles.arrowHoverColor);
        document.documentElement.style.setProperty('--carousel-pagination-color', splideStyles.paginationColor);
        document.documentElement.style.setProperty('--carousel-pagination-active-color', splideStyles.paginationActiveColor);
        document.documentElement.style.setProperty('--carousel-pagination-hover-color', splideStyles.paginationHoverColor);
    };

    let theme = 'light';
    if (window.splideDarkMode === 'auto') {
        theme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    } else if (window.splideDarkMode === 'true') {
        theme = 'dark';
    }
    applyThemeStyles(theme, window.splideStyles);

    if (window.splideDarkMode === 'auto') {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            applyThemeStyles(e.matches ? 'dark' : 'light', window.splideStyles);
        });
    }
}

// ÂàùÂßãÂåñÈùûËΩÆÊí≠ÂõæÁâáÁöÑ Medium Zoom
function initGlobalMediumZoom() {
    // Ê£ÄÊü•ÊòØÂê¶ÂêØÁî® medium-zoom
    if (!mediumZoomEnabled) {
        return;
    }
    const zoomOutsideCarousel = mediumZoom('img:not(.splide .zoomable)', {
        background: 'rgba(0, 0, 0, 0.8)',
        margin: 24
    });
}

// ÂàùÂßãÂåñËΩÆÊí≠ÁªÑ‰ª∂‰∏≠ÁöÑ Medium Zoom
function initCarouselMediumZoom() {
    const zoomCarousel = mediumZoom('.zoomable', {
        background: 'rgba(0, 0, 0, 0.8)',
        margin: 24,
        onOpen: (zoom) => {
            const img = zoom.target; // Ëé∑ÂèñÊ≠£Âú®Áº©ÊîæÁöÑÂõæÁâá
            img.classList.add('zooming'); // Ê∑ªÂä†‰∏Ä‰∏™Áº©ÊîæÊó∂ÁöÑ class
        },
        onClose: (zoom) => {
            const img = zoom.target; // Ëé∑ÂèñÁº©ÊîæÁöÑÂõæÁâá
            img.classList.remove('zooming'); // ÁßªÈô§Áº©ÊîæÊó∂ÁöÑ class
        }
    });

    zoomCarousel.on('open', () => {
        // ÈöêËóèÁÆ≠Â§¥ÂíåÂàÜÈ°µÊåâÈíÆ
        document.querySelectorAll('.splide__arrow, .splide__pagination').forEach(el => {
            el.style.display = 'none';
        });
    });

    zoomCarousel.on('close', () => {
        // ÈáçÊñ∞ÊòæÁ§∫ÁÆ≠Â§¥ÂíåÂàÜÈ°µÊåâÈíÆ
        document.querySelectorAll('.splide__arrow, .splide__pagination').forEach(el => {
            el.style.display = '';
        });
    });
}

// fancybox ÂÖºÂÆπË∞ÉÊï¥
function adjustFancybox() {
    Fancybox.bind("[data-fancybox]", {
        placeFocusBack: false,  // Á¶ÅÊ≠¢ Fancybox ÂÖ≥Èó≠Êó∂ÊªöÂä®ÂõûÈ°µÈù¢ÁöÑÁÑ¶ÁÇπ‰ΩçÁΩÆ
    });

    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.type === "childList") {
                removeFancyboxFromClones();
            }
        });
    });

    // ËßÇÂØüÊï¥‰∏™ÊñáÊ°£ÁöÑ DOM ÂèòÂåñ
    observer.observe(document, { childList: true, subtree: true });
}

// ÁßªÈô§ÂÖãÈöÜ Slide ‰∏≠ÁöÑ Fancybox ÈìæÊé•
function removeFancyboxFromClones() {
    const cloneSlides = document.querySelectorAll('.splide__slide--clone');

    cloneSlides.forEach((slide) => {
        const fancyboxLink = slide.querySelector('a.fancybox');
        if (fancyboxLink) {
            const img = fancyboxLink.querySelector('img');
            if (img) {
                // Â∞Ü img Êå™Âá∫ a Ê†áÁ≠æ
                fancyboxLink.replaceWith(img);
            }
        }
    });
}</script></body></html>